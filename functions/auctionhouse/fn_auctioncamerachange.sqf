
disableUserInput true; disableSerialization; params [ ["_ctrl", controlNull, [controlNull]], ["_index", -1, [0]] ]; deleteVehicle zero_var_auctionveh; if((isNull _ctrl) OR {_index isEqualTo -1}) exitWith {disableUserInput false; ctrlShow[80211,false];ctrlShow[80223,false];}; _data = _ctrl lbData _index; if(_data isEqualto "") exitWIth {disableUserInput false;ctrlShow[80211,false];ctrlShow[80223,false];}; _data = call compile _data; _bool = ctrlShown ((findDisplay 80200) displayCtrl 80202); _class = ""; _color = ""; _film = ""; _price = 0; _ins = 0; _owner = ""; if(_bool) then { _class = _data select 2; _color = _data select 4; _film = _data select 5; _price = _data select 6; _owner = _data select 7; } else { _class = _data select 2; _color = _data select 8; _film = _data select 9; _ins = _data select 10; }; zero_var_auctionveh = [_class, [0,0,0]] call zero_fnc_createVehicleLocal; zero_var_auctionveh allowDamage false; zero_var_auctionveh enableSimulation false; [zero_var_auctionveh, [ 24745, 18902.2, 0 ]] call zero_fnc_setPosATL; _colorArray = getArray(missionConfigFile >> "zero_CfgVehicles" >> _class >> "textures"); { if((_x select 0) isEqualTO _color) exitWIth { zero_var_auctionveh setObjectTexture [0,(_x select 2) select 0]; _count = count (_x select 2); if(_count < 2) exitWith {}; zero_var_auctionveh setObjectTexture [1,(_x select 2) select 1]; if(_count < 3) exitWith {}; zero_var_auctionveh setObjectTexture [2,(_x select 2) select 2]; if(_count < 4) exitWith {}; zero_var_auctionveh setObjectTexture [3,(_x select 2) select 3]; }; } forEach _colorArray; _setValue = call { if(_class in ["C_Offroad_01_F","B_G_Offroad_01_F","B_MRAP_01_F","I_MRAP_03_F"]) exitWith {[0]}; if(_class in ["B_T_LSV_01_armed_F","B_T_LSV_01_unarmed_F","O_T_LSV_02_unarmed_F"]) exitWith {[0,1]}; _tmp = []; for "_i" from 0 to (count(getArray(configFile >> "CfgVehicles" >> _class >> "hiddenSelectionsTextures")) -1) do { _tmp pushBack _i; }; _tmp }; { zero_var_auctionveh setObjectMaterial [_x,getText(missionConfigFile >> "zero_CfgMaterials" >> _film >> "path")]; } forEach _setValue; _shopprice = 0; { { if((_x select 0) isEquaLto _class) exitWith {_shopprice = _x select 1}; } forEach getArray(_x >> "vehicles"); if(!(_shopprice isEquaLto 0)) exitWith {}; } forEach ("getText(_x >> ""side"") in [""civ"", ""reb""]" configClasses (missionconfigFile >> "zero_Vehicleshops")); _shopprice = if(_shopprice isEqualTo 0) then { "Nicht verfügbar" } else { [round(_shopprice*1.5)] call zero_fnc_numberText; }; ((findDisplay 80200) displayCtrl 80211) ctrlSetStructuredText parseText (if(_bool) then { ctrlSHow[80224,((_data select 3) isEqualTo (getplayeruid player))];
if(_film isEqualTo "Default") then { format["Name: <t align='right'>%1</t><br />Lackierung: <t align='right'>%2</t><br />Preis: <t align='right'>%3</t><br />Originalpreis: <t align='right'>%4</t><br />Lagerplatz: <t align='right'>%5</t><br />Passagierplätze: <t align='right'>%6</t><br />Verkäufer: <t align='right'>%7",getText(configFile >> "CfgVehicles" >> _class >> "displayName"), (if(_color in getArray(missionconfigfile >> "zero_vehicleshops" >> "donatorSkins")) then {format["%1 (VIP)",_color]} else {_color}), [_price] call zero_fnc_numberText,_shopprice, getNumber(missionConfigFile >> 'zero_CfgVehicles' >> _class >> 'trunk'),getNumber(configFile >> "CfgVehicles" >> _class >> "transportSoldier"),_owner]; } else { _filmtxt = getText(missionConfigFile >> "zero_CfgMaterials" >> _film >> "name"); format["Name: <t align='right'>%1</t><br />Lackierung: <t align='right'>%2</t><br />Folie: <t align='right'>%3</t><br/>Preis: <t align='right'>%4</t><br />Originalpreis: <t align='right'>%5</t><br />Lagerplatz: <t align='right'>%6</t><br />Passagierplätze: <t align='right'>%7</t><br />Verkäufer: <t align='right'>%8",getText(configFile >> "CfgVehicles" >> _class >> "displayName"), (if(_color in getArray(missionconfigfile >> "zero_vehicleshops" >> "donatorSkins")) then {format["%1 (VIP)",_color]} else {_color}), (if(getNumber(missionConfigFile >> "zero_CfgMaterials" >> _film >> "donator") > 0) then {format["%1 (VIP)",_filmtxt]} else {_filmtxt}), [_price] call zero_fnc_numberText,_shopprice, getNumber(missionConfigFile >> 'zero_CfgVehicles' >> _class >> 'trunk'),getNumber(configFile >> "CfgVehicles" >> _class >> "transportSoldier"),_owner]; }; } else { _filmtxt = getText(missionConfigFile >> "zero_CfgMaterials" >> _film >> "name"); if(_filmtxt isEqualTo "") then {_filmtxt = "Standard"}; format["Name: <t align='right'>%1</t><br />Lackierung: <t align='right'>%2</t><br />Folie: <t align='right'>%3</t><br />Originalpreis: <t align='right'>%4</t><br />Lagerplatz: <t align='right'>%5</t><br />Passagierplätze: <t align='right'>%6</t><br />Versicherung: <t align='right'>%7</t>",getText(configFile >> "CfgVehicles" >> _class >> "displayName"), (if(_color in getArray(missionconfigfile >> "zero_vehicleshops" >> "donatorSkins")) then {format["%1 (VIP)",_color]} else {_color}), (if(getNumber(missionConfigFile >> "zero_CfgMaterials" >> _film >> "donator") > 0) then {format["%1 (VIP)",_filmtxt]} else {_filmtxt}), _shopprice,getNumber(missionConfigFile >> 'zero_CfgVehicles' >> _class >> 'trunk'),getNumber(configFile >> "CfgVehicles" >> _class >> "transportSoldier"),if(_ins isEqualto 1) then {"Ja"} else {"Nein"}]; }); ctrlShow[80211,true]; ctrlShow[80223,true]; disableUserInput false;
