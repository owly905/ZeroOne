if(!zero_var_allowedToSell) exitWith {"Du kannst ein Fahrzeug nur alle 20 Sekunden kaufen" call zero_fnc_msg;}; zero_var_allowedToSell = false; 0 spawn { uiSleep 20; zero_var_allowedToSell = true; }; _index = lbCurSel 80207; _cur = lbData [80207,_index]; if(_cur isEqualTO "") exitWIth {"Du hast keinen Eintrag ausgewählt" call zero_fnc_msg}; _cur = call compile _cur; if(!(cbChecked ((findDisplay 80200) displayCtrl 80208))) exitWith {"Du hast das Angebot nicht bestätigt!" call zero_fnc_msg}; if(((getNumber(missionConfigFile >> "zero_CfgMaterials" >> (_cur select 5) >> "donator") > 0) OR {(_cur select 4) in getArray(missionconfigfile >> "zero_vehicleshops" >> "donatorSkins")}) && (zero_var_donator isEqualTo 0)) exitWith {"Du bist kein VIP-Mitglied. Erwerbe ein VIP-Pack um diese Skins/Folien freizuschalten." call zero_fnc_msg}; _price = _cur select 6; _tempval = [2, 0] call zero_fnc_Z0Check; if(_price > _tempval) exitWith {(localize "STR_NOTF_NotEnoughMoney") call zero_fnc_msg};
[0, _tempval - _price] call zero_fnc_Z0Check; [1] call zero_fnc_updatePartial; disableUserInput true; [ "Die Auktion wird gekauft...", 1,"Auktionshaus", true, 2] call zero_fnc_msg; ctrlEnable [80204, false]; ctrlEnable [80205, false]; lbDelete [80207,_index]; deleteVehicle zero_var_auctionveh; ctrlShow[80211,false]; ctrlShow[80223,false]; if((lbSize 80207) isEqualTo 0) then { lbAdd [80207, "Kein Eintrag vorhanden"]; }; _id = _cur select 0; { if((_x select 0) isEqualTo _id) exitWith { zero_var_auctions deleteAt _foreachindex; }; } forEach zero_var_auctions; [ [3,player,_cur], "zero_fnc_auctionHandler", zero_var_HC1_owner,false] call zero_fnc_sendPacket; [format ["AUCTION BUY: %1 (%2, %3) hat eine Auktion (AID: %4, VID: %5, Name: %6) im Auktionshaus fuer %7€ gekauft.",player getVariable["zero_var_realname",name player], getPlayerUID player, playerSide, _id, _cur select 1, getText(missionConfigFile >> "zero_CfgVehicles" >> (_cur select 2) >> "logname"),[_price] call zero_fnc_numberText]] call zero_fnc_zoLog;
