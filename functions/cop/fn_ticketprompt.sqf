if (!hasInterface) exitWith {}; if(!isNull (findDisplay 2600)) exitWith {}; params [ ["_cop",objNull,[objNull]], ["_val",-1,[0]], ["_mode",-1,[0]] ]; if (isNull _cop) exitWith {}; zero_var_ticket_paid = false; zero_var_ticket_val = _val; zero_var_ticket_cop = _cop; if (_mode isEqualTo 0) exitWith {[_mode] call zero_fnc_ticketPay}; createDialog "zero_var_ticket_pay"; disableSerialization; waitUntil {!isNull (findDisplay 2600)}; _display = findDisplay 2600; _control = _display displayCtrl 2601; _control ctrlSetStructuredText parseText format["<t align='center'><t size='.8px'>" +(localize "STR_Cop_Ticket_GUI_Given"),_cop getVariable["zero_var_realname",name _cop],[_val] call zero_fnc_numberText];
[] spawn { disableSerialization; waitUntil {zero_var_ticket_paid || (isNull (findDisplay 2600))}; if(isNull (findDisplay 2600) && !zero_var_ticket_paid) then { [[0,format[localize "STR_Cop_Ticket_Refuse",profileName]],"zero_fnc_broadcast",west] call zero_fnc_sendPacket; [[1,format[localize "STR_Cop_Ticket_Refuse",profileName]],"zero_fnc_broadcast",zero_var_ticket_cop] call zero_fnc_sendPacket; [[1],"zero_fnc_payCop",zero_var_ticket_cop] call zero_fnc_sendPacket; }; };
