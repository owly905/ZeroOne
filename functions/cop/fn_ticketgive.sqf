if (!hasInterface) exitWith {}; private _disp = findDisplay 2650; private _check1 = _disp displayCtrl 2802; private _check2 = _disp displayCtrl 2803; private _check3 = _disp displayCtrl 2800; private _check4 = _disp displayCtrl 2801; private _exit = false; private _exit2 = false; private _percent = false; private "_val"; call { if (cbChecked _check1 && !cbChecked _check3 && !cbChecked _check2 && !cbChecked _check4) exitWith { _val = parseNumber (ctrlText 1004); if (_val <= 0) exitWith { (localize "STR_Cop_TicketNum") call zero_fnc_msg; _exit2 = true;}; }; if (cbChecked _check3 && !cbChecked _check1 && !cbChecked _check2 && !cbChecked _check4) exitWith { _val = parseNumber (ctrlText 1400); if (_val <= 0) exitWith { (localize "STR_Cop_TicketNum") call zero_fnc_msg; _exit2 = true;}; }; if (cbChecked _check2 && !cbChecked _check4 && !cbChecked _check1 && !cbChecked _check3) exitWith { _val = parseNumber (ctrlText 1005); if (_val <= 0 || _val > 5) exitWith { (localize "STR_Cop_TicketNum") call zero_fnc_msg; _exit2 = true;}; zero_var_ticket_percentage = _val; _val = round (zero_var_ticket_bankacc * (zero_var_ticket_percentage / 100));
_percent = true; }; if (cbChecked _check4 && !cbChecked _check2 && !cbChecked _check1 && !cbChecked _check3) exitWith { _val = parseNumber (ctrlText 1401); if (_val <= 0 || _val > 5) exitWith { (localize "STR_Cop_TicketNum") call zero_fnc_msg; _exit2 = true;}; zero_var_ticket_percentage = _val; _val = round (zero_var_ticket_bankacc * (zero_var_ticket_percentage / 100)); _percent = true; }; _exit = true; }; if (_exit2) exitWith {}; if (_exit) exitWith { "Wähle ein Ticket aus!" call zero_fnc_msg; }; if ((!_percent) && (_val > 4000000)) exitWith {(localize "STR_Cop_TicketOver100") call zero_fnc_msg;}; _action = [ format["Soll das Ticket über %1 sofort abgezogen werden?", [_val] call zero_fnc_numberText], "Ticket erzwingen", localize "STR_Global_Yes", localize "STR_Global_No" ] call BIS_fnc_guiMessage; [[0,format[localize "STR_Cop_TicketGive",profileName,[_val] call zero_fnc_numberText,zero_var_ticket_unit getVariable["zero_var_realname",name zero_var_ticket_unit]]],"zero_fnc_broadcast",west] call zero_fnc_sendPacket; [[player,_val,(if(_action) then [{0},{1}])],"zero_fnc_ticketPrompt",zero_var_ticket_unit,false] call zero_fnc_sendPacket; closeDialog 0; zero_var_ticket_bankacc = nil; zero_var_ticket_percentage = nil;
