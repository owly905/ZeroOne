if (!hasInterface) exitWith {}; private["_civ","_invs","_robber","_illegal","_inv","_illegalItems"]; _civ = param[0,objNull,[objNull]]; _invs = param[1,[],[[]]]; _robber = param[2,false,[false]]; if(isNull _civ) exitWith {}; _illegal = 0; _inv = ""; _illegalItems = getArray(missionConfigFile >> "zero_CfgItems" >> "illegalItems"); if(count _invs > 0) then { { _inv = _inv + format["%1 %2<br/>",_x select 1,getText(missionConfigFile >> "zero_CfgItems" >> (_x select 0) >> "name")]; private _index = [_x select 0,_illegalItems] call zero_fnc_findIndex; if(_index != -1) then { _illegal = _illegal + ((_x select 1) * ((_illegalItems select _index) select 1)); }; } forEach _invs; if(_illegal > 6000) then { [1,(getPlayerUID _civ),(_civ getVariable["zero_var_realname",name _civ])] call zero_fnc_wantedViaScript; }; [2,(getPlayerUID _civ),(_civ getVariable["zero_var_realname",name _civ])] call zero_fnc_wantedViaScript;
[[0,format[localize "STR_Cop_Contraband",(_civ getVariable["zero_var_realname",name _civ]),[_illegal] call zero_fnc_numberText]],"zero_fnc_broadcast",west] call zero_fnc_sendPacket; }else{ _inv = localize "STR_Cop_NoIllegal"; }; if(!alive _civ || player distance _civ > 5) exitWith {(format[localize "STR_Cop_CouldntSearch",_civ getVariable["zero_var_realname",name _civ]]) call zero_fnc_msg;}; [format["<t color='#FFD700'><t size='0.9'>"+(localize "STR_Cop_IllegalItems")+"</t></t><br/>%1<br/><br/><br/><br/><t color='#FF0000'>%2</t>",_inv,if(_robber) then {localize "STR_NOTF_BankRobber"} else {""}],1,_civ getVariable["zero_var_realname",name _civ]] call zero_fnc_msg; if(_robber) then{ [[0,format[localize "STR_Cop_Robber",(_civ getVariable["zero_var_realname",name _civ])]],"zero_fnc_broadcast",(allPlayers - entities "HeadlessClient_F")] call zero_fnc_sendPacket; }; ["search"] call zero_fnc_improveSkillCharacter; zero_var_action_inUse = false;
