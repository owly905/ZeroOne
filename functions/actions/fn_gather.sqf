if (!hasInterface) exitWith {}; private["_gather","_diff","_value","_resourceZones","_zone","_time"]; if(isNil "zero_var_action_gather") then {zero_var_action_gathering = false;}; _resourceZones = ["briefos_1","briefos_2","briefos_3","briefos_4","briefos_5","briefos_6","briefos_7", "postos_1","postos_2","postos_3","postos_4","apple_1","apple_2","apple_3","apple_4","apple_5","apple_6","apple_7", "peaches_1","peaches_2","peaches_3","peaches_4","peaches_5","peaches_6","peaches_7", "heroin_1","cocaine_1","weed_1","schwarz_1","weiss_1","grape_1","baumwolle_1", "bananen_1","bananen_2","bananen_3","bananen_4","bananen_5","bananen_6","bananen_7","gas_1", "jail_worker","marker_relikttempel"]; _zone = ""; _time = 0; if(zero_var_action_gather) exitWith {}; if(!isNull (objectParent player)) exitWith {(localize "STR_NOTF_VehicleGetOut") call zero_fnc_msg;}; { if(player distance2D (getMarkerPos _x) < 25) exitWith {_zone = _x;}; } forEach _resourceZones; if(_zone isEqualTo "") exitWith { zero_var_action_inUse = false; zero_var_action_gather = false; }; if(_zone isEqualTo "jail_worker" && zero_var_is_arrested) exitWith { zero_var_action_gather = true; zero_var_action_inUse = true; for "_i" from 0 to 2 do { player playMove "AinvPercMstpSnonWnonDnon_Putdown_AmovPercMstpSnonWnonDnon"; uiSleep 2.5; }; zero_var_jail_stones = zero_var_jail_stones + 1; titleText [format["Du hast bis jetzt %1 Steine gesammelt.", [zero_var_jail_stones] call zero_fnc_numberText],"PLAIN"]; zero_var_action_gather = false; zero_var_action_inUse = false; }; switch(true) do { case (_zone in ["apple_1","apple_2","apple_3","apple_4","apple_5","apple_6","apple_7"]): {_gather = "apple";_time = 1;}; case (_zone in ["peaches_1","peaches_2","peaches_3","peaches_4","peaches_5","peaches_6","peaches_7"]): {_gather = "peach";_time = 1;}; case (_zone in ["heroin_1"]): {_gather = "heroinu";_time = 3;}; case (_zone in ["cocaine_1"]): {_gather = "cocaine";
_time = 3;}; case (_zone in ["weed_1"]): {_gather = "cannabis";_time = 3;}; case (_zone in ["schwarz_1"]): {_gather = "dunklematerie";_time = 6;}; case (_zone in ["weiss_1"]): {_gather = "helium3";_time = 6;}; case (_zone in ["postos_1","postos_2","postos_3","postos_4"]): {_gather = "paket";_time = 3;}; case (_zone in ["briefos_1","briefos_2","briefos_3","briefos_4","briefos_5","briefos_6","briefos_7"]): {_gather = "brief";_time = 2;}; case (_zone in ["grape_1"]): {_gather = "grapes";_time = 2;}; case (_zone in ["baumwolle_1"]): {_gather = "baumwolle";_time = 2;}; case (_zone in ["bananen_1","bananen_2","bananen_3","bananen_4","bananen_5","bananen_6","bananen_7"]): {_gather = "bananen"; _time = 1;}; case (_zone in ["gas_1"]): {_gather = "gas";_time = 2;}; case (_zone in ["marker_relikttempel"]) : {_gather = "artifact"; _time = 15;}; default {""}; }; _time = round (_time / zero_var_buff_farmMultiplier); if (_time < 1) then { _time = 1; }; _value = [_gather] call zero_fnc_getSkillValueFarming; _diff = [_gather,_value,zero_var_carryWeight,zero_var_maxWeight] call zero_fnc_calWeightDiff; if(_diff == 0) exitWith { (localize "STR_NOTF_InvFull") call zero_fnc_msg; zero_var_action_inUse = false; zero_var_action_gather = false; }; zero_var_action_gather = true; zero_var_action_inUse = true; private _handled = false; for "_i" from 0 to _time do { if (!(isNull(objectParent player))) exitWith {"Du kannst nicht abbauen, wenn du in einem Fahrzeug sitzt!" call zero_fnc_msg; _handled = true;}; player playMove "AinvPercMstpSnonWnonDnon_Putdown_AmovPercMstpSnonWnonDnon"; uiSleep 2.5; }; if(zero_var_killed || _handled) exitWith {zero_var_action_gather = false;zero_var_action_inUse = false;}; if (playerSide != west) then { if(([true,_gather,_diff] call zero_fnc_handleZOInv)) then { titleText[format [ localize "STR_Gather_Suceed",_diff,getText(missionConfigFile >> "zero_CfgItems" >> _gather >> "name")],"PLAIN"]; }; [_gather] call zero_fnc_improveSkillFarming; }; zero_var_action_gather = false; zero_var_action_inUse = false;
