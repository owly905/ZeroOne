if (!hasInterface) exitWith {}; _unit = param[0,objNull,[objNull]]; disableSerialization; if(isNull _unit || !isPlayer _unit || (side _unit isEqualTo west)) exitWith {}; if(!(createDialog "zero_var_ticket_give")) exitWith {(localize "STR_Cop_TicketFail") call zero_fnc_msg;}; private _tmpList = zero_var_wanted_list; private _idx = [(getPlayerUID _unit), _tmpList] call zero_fnc_findIndex; if (_idx isEqualTo -1) exitWith {"Dieser Spieler hat nichts verbrochen" call zero_fnc_msg; closeDialog 0;}; 

lbClear 1500; lbAdd [1500, format["%1Â´s Delikte:",_unit getVariable["zero_var_realname",name _unit]]]; private _crimeArr = (_tmpList select _idx) select 2;
private _sumE = 0; private _sumP = 0; { private _delikt = _x select 0; lbAdd [1500, format["%1x %2",_x param [6,1,[0]], _delikt]]; lbSetData [2402, (lbSize 1500)-1, _delikt]; _sumE = _sumE + (_x select 1); _sumP = _sumP + (_x select 2); } forEach _crimeArr; if (_sumP > 5) then {_sumP = 5;}; zero_var_ticket_unit = _unit; zero_var_ticket_percentage = _sumP; [[0,player],"zero_fnc_returnBankacc",zero_var_ticket_unit] call zero_fnc_sendPacket; waitUntil {!isNil "zero_var_ticket_bankacc"}; ctrlSetText [1004,_sumE call zero_fnc_numberTextNoDigits]; ctrlSetText [1005,_sumP call zero_fnc_numberTextNoDigits]; ctrlSetText [1400,""]; ctrlSetText [1401,""];
