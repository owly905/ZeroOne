if (!hasInterface) exitWith {}; private ["_display","_streifenList","_einheitenList","_unit","_streifen","_text","_index","_streifenListDefinition"]; disableSerialization; _display = findDisplay 3400; if (isNull _display) exitWith {}; _streifenList = _display displayCtrl 3404; _einheitenList = _display displayCtrl 3405; _unit = lbData[3405,lbCurSel(3405)]; _unit = call compile format ["%1", _unit]; if(player != _unit) exitWith {"Du kannst nur dich selbst aus einer Streife entfernen" call zero_fnc_msg;}; _unit setVariable["zero_var_streife",nil,true]; _einheitenList lbDelete (lbCurSel _einheitenList); lbClear _streifenList; lbClear _einheitenList; _streifen = []; { if(isPlayer _x && !(_x getVariable["zero_var_streife",""] isEqualTo "")) then { _index = [_x getVariable "zero_var_streife",_streifen] call zero_fnc_findIndex;
if(_index != -1) then { _streifen set[_index,[(_streifen select _index) select 0,((_streifen select _index) select 1) +1]]; }else{ _streifen pushBack [_x getVariable "zero_var_streife",1]; }; }; } forEach units(group player); _streifenListDefinition = if (playerSide isEqualTo west) then { getArray(missionConfigFile >> "zero_CfgPatrolSystem" >> "police" >> "patrols"); } else { getArray(missionConfigFile >> "zero_CfgPatrolSystem" >> "firefighter" >> "patrols"); }; _text = ""; { _text = format ["%1 (%2)", _x select 0, _x select 1]; _index = [_x select 1,_streifen] call zero_fnc_findIndex; if(_index != -1) then { _text = parseText format ["%1 - %2", _text, (_streifen select _index) select 1]; }else{ _text = format ["%1 - 0", _text]; }; _streifenList lbAdd format["%1",_text]; _streifenList lbSetData [(lbSize _streifenList)-1,(_x select 1)]; } forEach _streifenListDefinition;
