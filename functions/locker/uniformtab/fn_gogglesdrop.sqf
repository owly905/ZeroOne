if (!hasInterface) exitWith {}; private ["_targetControl","_sourceControl","_data","_newGoggles","_oldGoggles"]; disableSerialization; _targetControl = param[0,controlNull,[controlNull]]; _sourceControl = param[3,0,[0]]; _data = param[4,[],[[]]]; _data = _data select 0; _newGoggles = toLower(_data select 2); _oldGoggles = toLower(_targetControl lbData 0); if(_newGoggles isEqualTo "") exitWith {}; if(ctrlIDC _targetControl == 1502 && _sourceControl != 1503 || ctrlIDC _targetControl == 1503 && _sourceControl != 1502) exitWith {"Das passt hier nicht" call zero_fnc_msg;}; if(_sourceControl isEqualTo 1502) then { lbClear _targetControl; _targetControl lbAdd format ["   %1",getText (configFile >> "CfgGlasses" >> _newGoggles >> "displayName")]; _targetControl lbSetTooltip [lbSize(_targetControl) - 1, getText (configFile >> "CfgGlasses" >> _newGoggles >> "displayName")];
_targetControl lbSetPicture [lbSize(_targetControl) - 1, getText (configFile >> "CfgGlasses" >> _newGoggles >> "picture")]; _targetControl lbSetValue [lbSize(_targetControl) - 1, 1]; _targetControl lbSetData [lbSize(_targetControl) - 1, _newGoggles]; [toLower(_newGoggles),-1] call zero_fnc_addItemToLocker; if(!(_oldGoggles isEqualTo "")) then { [toLower(_oldGoggles),1] call zero_fnc_addItemToLocker; }; if(_newGoggles != (goggles player)) then { player addGoggles _newGoggles; }; }else{ _sourceControl = ((findDisplay 1000) displayCtrl _sourceControl); lbClear _sourceControl; _sourceControl lbAdd ""; _sourceControl lbSetPicture [lbSize(_sourceControl) - 1, "\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_glasses_gs.paa"]; [toLower(_newGoggles),1] call zero_fnc_addItemToLocker; removeGoggles player; }; [] call zero_fnc_updateUniformTab; _targetControl lbSetCurSel -1;
