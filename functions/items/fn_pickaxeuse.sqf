if (!hasInterface) exitWith {}; closeDialog 0; private ["_mine","_diff","_veh","_value"]; _veh = nearestObjects [player, ["Car", "Air"],8]; if(count _veh != 0) exitWith {(localize "STR_NOTF_Mine_Near_Vehicle") call zero_fnc_msg;}; if(!isNull (objectParent player)) exitWith {(localize "STR_ISTR_Pick_MineVeh") call zero_fnc_msg;}; _mine = switch (true) do { case (player distance (getMarkerPos "lead_1") < 30): {"copperore"}; case (player distance (getMarkerPos "lead_2") < 30): {"copperore"}; case (player distance (getMarkerPos "iron_1") < 40): {"ironore"}; case (player distance (getMarkerPos "iron_2") < 40): {"ironore"}; case (player distance (getMarkerPos "salt_1") < 120) : {"salt"}; case (player distance (getMarkerPos "sand_1") < 50) : {"sand"}; case (player distance (getMarkerPos "diamond_1") < 20): {"diamond"}; case (player distance (getMarkerPos "diamond_2") < 20): {"diamond"}; case (player distance (getMarkerPos "oil_1") < 40) : {"oilu"}; case (player distance (getMarkerPos "oil_2") < 40) : {"oilu"};
case (player distance (getMarkerPos "rock_1") < 50): {"rock"}; default {""}; }; if(_mine isEqualTo "") exitWith {}; _value = [_mine] call zero_fnc_getSkillValueFarming; _value = _value * zero_var_buff_farmMultiplier; _diff = [_mine,_value,zero_var_carryWeight,zero_var_maxWeight] call zero_fnc_calWeightDiff; if(_diff == 0) exitWith {(localize "STR_NOTF_InvFull") call zero_fnc_msg;}; if(!zero_var_pickAxeAllowed) exitWith {}; zero_var_pickAxeAllowed = false; zero_var_action_gather = true; for "_i" from 0 to 2 do { player playMove "AinvPercMstpSnonWnonDnon_Putdown_AmovPercMstpSnonWnonDnon"; uiSleep 2.5; }; if(zero_var_killed) exitWith {}; if (playerSide != west) then { if(([true,_mine,_diff] call zero_fnc_handleZOInv)) then { titleText[format[localize "STR_ISTR_Pick_Success",getText(missionConfigFile >> "zero_CfgItems" >> _mine >> "name"),_diff],"PLAIN"]; }; [_mine] call zero_fnc_improveSkillFarming; }; zero_var_action_gather = false; zero_var_pickAxeAllowed = true;
