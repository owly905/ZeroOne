if (!hasInterface) exitWith {}; private["_vault","_handle","_cops","_bomb","_rsb"]; _vault = param[0,objNull,[objNull]]; if(isNull _vault) exitWith {}; if(serverTime <= 1500) exitWith {"Es ist noch zu früh am Tag, es ist kein Gold im Tresor." call zero_fnc_msg;}; if(typeOf _vault != "Land_CargoBox_V1_F") exitWith {(localize "STR_ISTR_Blast_VaultOnly") call zero_fnc_msg;}; if(fed_bank getVariable["zero_var_chargeplaced",false]) exitWith {(localize "STR_ISTR_Blast_AlreadyPlaced") call zero_fnc_msg;}; if(fed_bank getVariable["zero_var_safe_open",false]) exitWith {(localize "STR_ISTR_Blast_AlreadyOpen") call zero_fnc_msg;}; if(!(fed_bank getVariable["zero_var_chargeplacingallowed",true])) exitWith {(localize "STR_NOTF_Bank_Robbery") call zero_fnc_msg;}; _rsb = nearestObject [[20889,19224,0],"Land_Research_HQ_F"]; if((_rsb getVariable["bis_disabled_Door_1",1] isEqualTo 1) && _rsb getVariable["bis_disabled_Door_2",1] isEqualTo 1) exitWith { (localize "STR_ISTR_Blast_BugUsing") call zero_fnc_msg; [format ["SUSPICOUS: %1 (%2, %3) hat versucht den Safe zu sprengen ohne den Tresor zu oeffnen!",player getVariable["zero_var_realname",name player], getPlayerUID player, playerSide]] call zero_fnc_zoLog;
}; _cops = {(side _x) isEqualTo west} count playableUnits; if(_cops < 20) exitWith {(localize "STR_NOTF_No_Cops") call zero_fnc_msg;}; if(!([false,"blastingcharge",1] call zero_fnc_handleZOInv)) exitWith {}; fed_bank setVariable["zero_var_chargeplaced",true,true]; [[1,localize "STR_ISTR_Blast_Placed"],"zero_fnc_broadcast",west] call zero_fnc_sendPacket; ["Schütze den Tresor vor der Polizei!",2,"Der Timer läuft!"] call zero_fnc_msg; _handle = [] spawn zero_fnc_demoChargeTimer; [[],"zero_fnc_demoChargeTimer",west,false] call zero_fnc_sendPacket; waitUntil {scriptDone _handle}; uiSleep 0.9; if(!(fed_bank getVariable["zero_var_chargeplaced",false])) exitWith {(localize "STR_ISTR_Blast_Disarmed") call zero_fnc_msg;}; [[player, "zero_var_fnc_createVehicle", ["Bo_GBU12_LGB_MI10", getPosATL fed_bank]], "zero_fnc_remoteExecuteCommand", zero_var_HC1_owner] call zero_fnc_sendPacket; fed_bank setVariable["zero_var_chargeplaced",false,true]; _rsb setVariable["used",true,true]; [] spawn { fed_bank setVariable["zero_var_chargeplacingallowed",false,true]; fed_bank setVariable["zero_var_safe_open",true,true]; uiSleep (45 * 60); fed_bank setVariable["zero_var_safe_open",false,true]; }; [localize "STR_ISTR_Blast_Opened",2] call zero_fnc_msg;
