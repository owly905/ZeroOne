private _loadout =+ zero_var_loadouts_selectedLoadout; private _loadoutItems = _loadout call zero_fnc_fetchLoadoutItems; private _shopItemInfo = call zero_fnc_fetchShopItems; private _aviableItems = []; { if (_x select 3) then { _aviableItems pushBack (_x select 0); }; } forEach _shopItemInfo; private _items = []; private _itemsSimple = []; { private _index = _itemsSimple find _x; if (_index != -1) then { private _temp = _items select _index; _temp set [1,((_items select _index) select 1) + 1]; _items set [_index, _temp]; } else { _items pushBack [_x,1,_x in _aviableItems]; _itemsSimple pushBack _x; }; } forEach _loadoutItems; _text = ""; _text = _text + "Ausrüstung:" + "<br/>" + "<br/>"; { private _currentClass = _x select 0; private _index = _shopItemInfo findIf {(_x select 0) isEqualTo _currentClass};
private _name = "nil"; if (_index != -1) then { _name = (_shopItemInfo select _index) select 1; }; if(_name isEqualTo "nil") then { private _config = switch (true) do { case(isClass(configFile >> "CfgMagazines" >> _currentClass)): {"CfgMagazines"}; case(isClass(configFile >> "CfgWeapons" >> _currentClass)): {"CfgWeapons"}; case(isClass(configFile >> "CfgVehicles" >> _currentClass)): {"CfgVehicles"}; case(isClass(configFile >> "CfgGlasses" >> _currentClass)): {"CfgGlasses"}; }; _name = getText(configFile >> _config >> _currentClass >> "displayName"); }; _text = _text + ( ( (str (_x select 1)) + "x " ) + _name); if (!(_x select 2)) then { _text = _text + " (an diesem Shop nicht verfügbar)"; }; _text = _text + "<br/>"; } forEach _items; ((findDisplay 9900) displayCtrl 1100) ctrlSetStructuredText (parseText _text);
