if (!hasInterface) exitWith {}; private _curObj = (findDisplay 175462) getVariable ["zero_var_curObj",objNull]; if (!isNull _curObj) then { [_curObj] call zero_fnc_deleteVehicle; (findDisplay 175462) setVariable ["zero_var_curObj",objNull]; }; private _curLimit = (findDisplay 175462) getVariable ["zero_var_limit",20]; private _nextLimit = if (_curLimit >= 80) then { 80 } else { if(zero_var_donator < 3) then { if((_curLimit + 10) > 30) then { _curLimit }else{ (_curLimit + 10) }; }else{ _curLimit + 10 }; }; private _price = switch _nextLimit do { case 20: {50000}; case 30: {150000}; case 40: {500000}; case 50: {1250000}; case 60: {1500000}; case 70: {1750000}; case 80: {2000000}; }; private _msg = ""; private _button = ""; if (_curLimit == _nextLimit) then { _msg = format [localize "STR_House_furniture_raiseLimitMsg_upgradeNotPosible",_curLimit];
_button = "OK :("; } else { _msg = format [localize "STR_House_furniture_raiseLimitMsg_upgradePosible",_curLimit,_nextLimit,[_price] call zero_fnc_numberText]; _button = localize "STR_Global_Buy"; }; private _action = [ _msg, localize "STR_House_furniture_raiseLimitMsg_upgradeLimitHeader", _button, localize "STR_Global_Cancel", (findDisplay 175462) ] call BIS_fnc_guiMessage; if (_curLimit == _nextLimit) exitWith {}; if (_action) then { if(([2, 0] call zero_fnc_Z0Check) < _price) exitWith {(format [localize "STR_House_NotEnough"]) call zero_fnc_msg;}; [0, ([2, 0] call zero_fnc_Z0Check) - _price] call zero_fnc_Z0Check; [1] call zero_fnc_updatePartial; (findDisplay 175462) setVariable ["zero_var_limit",_nextLimit]; (findDisplay 175462) setVariable ["zero_var_unsavedChanges",true]; [true] spawn zero_fnc_furniture_fillItems; };
