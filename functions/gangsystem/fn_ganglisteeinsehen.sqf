if (!hasInterface) exitWith {}; private["_action","_display","_titel","_list","_button","_name","_member","_button2","_price"]; if(isNil "zero_var_allowedToRefresh") then {zero_var_allowedToRefresh = serverTime;}; if((serverTime - zero_var_allowedToRefresh) < 10) exitWith {"Du kannst nur alle 10 Sekunden die Gangliste einsehen." call zero_fnc_msg;}; zero_var_allowedToRefresh = serverTime; _price = 50000; _action = [ format["Möchtest du %1€ für das Einsehen der Gangliste bezahlen?",[_price] call zero_fnc_numberText], "Gangliste einsehen", localize "STR_Global_Yes", localize "STR_Global_No" ] call BIS_fnc_guiMessage; if(!_action) exitWith {}; if([2, 0] call zero_fnc_Z0Check < _price) exitWith {(format["Du hast nicht genug Geld auf der Bank. Es fehlen dir %1",[_price - [2, 0] call zero_fnc_Z0Check] call zero_fnc_numberText]) call zero_fnc_msg;}; [0, ([2, 0] call zero_fnc_Z0Check) - _price] call zero_fnc_Z0Check; disableSerialization; createDialog "zero_var_ganglist"; _display = findDisplay 3300; if (isNull _display) exitWith {};
_titel = _display displayCtrl 3301; _list = _display displayCtrl 3302; _button = _display displayCtrl 3303; _button ctrlShow false; _button2 = _display displayCtrl 3304; _button2 ctrlShow false; _titel ctrlSetStructuredText parseText format["<t align='center' size='1.3'>Hier findest du eine Liste von 100 zufällig ausgewählten aktiven Gangs.</t>"]; lbClear _list; [[clientOwner],"zero_fnc_getGangList",zero_var_HC1_owner,false] call zero_fnc_sendPacket; waitUntil {!isNil "zero_var_gangReturn"}; if (zero_var_gangReturn isEqualTo [[]]) then { _list lbAdd "Keine Gangs verfügbar"; _list lbSetData [(lbSize _list)-1,"Null"]; } else { { _name = _x select 0; _member = _x select 1; _list lbAdd format ["%1 - Mitglieder: %2", _name, _member]; _list lbSetData [(lbSize _list)-1,str(_x)]; } forEach zero_var_gangReturn; }; zero_var_gangReturn = nil; _nearestCity = (nearestLocations [player,["NameCityCapital","NameCity","NameVillage"],10000]) select 0; _string = text _nearestCity; _string2 = _string select[0,3]; _string = toUpper(_string2)+ ("-") + str(round(random(999999))); cursorTarget setPlateNumber "RDM MARKT";
