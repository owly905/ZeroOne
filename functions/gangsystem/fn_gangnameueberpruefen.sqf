if (!hasInterface) exitWith {}; private["_display","_titel","_text","_unten","_ok","_fehler","_gangName","_chrByte","_allowed"]; disableSerialization; createDialog "zero_var_gangerstellen"; _display = findDisplay 3200; if (isNull _display) exitWith {}; _titel = _display displayCtrl 3202; _text = _display displayCtrl 3201; _unten = _display displayCtrl 3204; _ok = _display displayCtrl 3203; _ok ctrlSetText "Überprüfen"; _ok buttonSetAction "zero_var_gangWeiter = true;"; _titel ctrlSetStructuredText parseText format["<t align='center' size='1'>Bitte gib den gewünschten Gangnamen ein.</t>"]; _unten ctrlSetStructuredText parseText format["<t align='center' size='1'>Es sind nur <br/> Buchstaben, Zahlen, Leerzeichen und beschränkte Sonderzeichen erlaubt!</t>"]; while {true} do { _fehler = nil; _text ctrlSetText ""; _gangName = ""; zero_var_gangWeiter = false; waitUntil {zero_var_gangWeiter || isNull (findDisplay 3200)}; zero_var_gangWeiter = nil; if (isNull (findDisplay 3200)) exitWith {}; _gangName = ctrlText _text; if (_gangName isEqualTo "") then { _fehler = true; _unten ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Das Eingabefeld ist leer.</t>"];
}else { if ((count _gangName) > 24) then { _fehler = true; _unten ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Der Gangname ist länger als 24 Zeichen</t>"]; }else{ _chrByte = toArray (_gangName); _allowed = toArray("!#$%&()*+,-./0123456789<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]_abcdefghijklmnopqrstuvwxyz| "); { if !(_x in _allowed) exitWith { _fehler = true; _unten ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Das Zeichen %1 ist im Gangnamen nicht erlaubt!</t>",toString [_x]]; } }forEach _chrByte; }; }; if (isNil "_fehler") then { _unten ctrlSetStructuredText parseText format["<t align='center' size='1' color='#EDF5F5'>Der Gangname %1 wird überprüft!</t>",_gangName]; [[clientOwner,0,_gangName],"zero_fnc_checkGangnameTag",zero_var_HC1_owner,false] call zero_fnc_sendPacket; waitUntil {!isNil "zero_var_gangReturn"}; if (zero_var_gangReturn isEqualTo []) then { _unten ctrlSetStructuredText parseText format["<t align='center' size='1' color='#0BDA51'>Der Gangname %1 ist noch frei!</t>",_gangName]; } else { _unten ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Der Gangname %1 ist bereits belegt!</t>",_gangName]; }; zero_var_gangReturn = nil; }; };
