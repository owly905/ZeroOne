if (!hasInterface) exitWith {}; private["_group","_gang","_gangKonto","_gangHouse","_gangHousePos","_gangHouseUpgrades","_selection","_price","_action"]; disableSerialization; _group = (group player); _gang = _group getVariable ["zero_var_gang",[]]; if(_gang isEqualTo []) exitWith {"Du bist in keiner Gang" call zero_fnc_msg;}; if(count _gang < 7) exitWith {"Es ist ein Fehler aufgetreten" call zero_fnc_msg;}; _gangKonto = _gang select 5; _gangHouse = _gang select 6; _gangHousePos = _gangHouse select 0; if(_gangHousePos isEqualTo []) exitWith {"Es ist kein Ganghauptquartier eingetragen" call zero_fnc_msg;}; if(((group player) getVariable["zero_var_gangHausInUse",objNull]) != player) exitWith {"Jemand anderes greift auf das Hausmenü zu!" call zero_fnc_msg;}; _gangHouseUpgrades = _gangHouse select 1; _selection = lbData[3302,(lbCurSel 3302)]; if(_selection in _gangHouseUpgrades) exitWith { if(_selection == "Garage") then { while {dialog} do {closeDialog 0;}; [0,true] spawn zero_fnc_gangHauptquatierUpgradeGarage; }else{ "Das Upgrade ist bereits vorhanden" call zero_fnc_msg; }; }; _price = switch (_selection) do { case "ATM":{10000000}; case "Markt":{2000000}; case "General Store":{5000000}; case "Medic":{3000000};
case "Garage":{10000000}; case "Garagen Upgrade (LKW)":{60000000}; case "Garagen Upgrade (Gepanzert)":{40000000}; default {-1}; }; if(_price isEqualTo -1) exitWith {"Nichts ausgewählt" call zero_fnc_msg;}; _action = [ parseText format["Möchtest du %1€ für das Uprgade <t color='#ffff00'>%2</t> bezahlen?",[_price] call zero_fnc_numberText, _selection], "Ganghauptquartier upgraden", localize "STR_Global_Yes", localize "STR_Global_No" ] call BIS_fnc_guiMessage; if(!_action) exitWith {}; if(_gangKonto < _price) exitWith { (format ["Deine Gang hat nicht genug Geld auf dem Konto. Es fehlen %1€", [_price - _gangKonto] call zero_fnc_numberText]) call zero_fnc_msg; }; if(_selection == "Garage") exitWith {while {dialog} do {closeDialog 0;}; [_price,false] spawn zero_fnc_gangHauptquatierUpgradeGarage}; _gangKonto = _gangKonto - _price; _gangHouseUpgrades pushBack _selection; _gangHouse set[1,_gangHouseUpgrades]; _gang set[5,_gangKonto]; _gang set[6,_gangHouse]; _group setVariable["zero_var_gang",_gang,true]; [format["Das Hauptquatier wurde erfolgreich um %1 erweitert",_selection],2] call zero_fnc_msg; [[clientOwner,5,[_gang select 0,_gangHouse,_gang select 5]],"zero_fnc_updateGang",zero_var_HC1_owner,false] call zero_fnc_sendPacket; closeDialog 0; [] spawn zero_fnc_gangUpdateGanginfo;
