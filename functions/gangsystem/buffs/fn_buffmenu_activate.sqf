if (!hasInterface) exitWith {}; 

params [ ["_buff","",[""]] ]; if (_buff isEqualTo "") exitWith { ctrlEnable [2505, true]; }; private _group = group player; private _arr = _group getVariable ["zero_var_gang_buffs",[[],[]]]; private _buffarr = _arr select 1; private _exit = false; private _max = getNumber (missionConfigFile >> "zero_CfgBuffs" >> "buffs" >> _buff >> "max"); private _cnt = 0; scopeName "exit"; if (!(_buffarr isEqualTo [])) then { { if ((_x select 0) isEqualTo _buff) then { _cnt = _cnt + 1; if (_cnt >= _max) then { _exit = true; breakTo "exit"; }; }; } forEach _buffarr; }; private _name = getText (missionConfigFile >> "zero_CfgBuffs" >> "buffs" >> _buff >> "name"); private _msg = []; if (_exit) then { _msg = [ parseText format ["Die maximale Anzahl %1 für '%2' ist bereits aktiv.",_max,_name], "Buff aktivieren", false, "Ok" ];
} else { private _multi = getNumber (missionConfigFile >> "zero_CfgBuffs" >> "buffs" >> _buff >> "multiplier"); _multi = if (_multi isEqualTo 0) then { ""; } else { format ["<br/>Farmgeschwindigkeit wird um +%1 auf %2 erhöht.",_multi,(1 + (_multi * (_cnt + 1)))]; }; if (_buff isEqualTo "dealer") then { _multi = "<br/>Der Gangdealer kommt nur einmal pro Aktivierung auf die Insel."; }; private _duration = (getNumber (missionConfigFile >> "zero_CfgBuffs" >> "buffs" >> _buff >> "duration")) / 60; _msg = [ parseText format["Möchtest du den Buff '%1' aktivieren ?<br/><br/>Laufzeit: %2 Minuten.<br/>%3 von maximal %4 sind bereits aktiv.%5",_name,_duration,_cnt,_max,_multi], "Buff aktivieren", localize "STR_Global_Yes", localize "STR_Global_No" ]; }; _action = _msg call BIS_fnc_guiMessage; if(!_action) exitWith { ctrlEnable [2505, true]; }; [[player,_buff],"zero_fnc_updateBuff",zero_var_HC1_owner,false] call zero_fnc_sendPacket; uiSleep 5; ctrlEnable [2505, true];
