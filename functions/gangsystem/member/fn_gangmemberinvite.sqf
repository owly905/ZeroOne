if (!hasInterface) exitWith {}; private["_group","_gang","_gangName","_action","_exit","_unit","_member","_index","_gangHouse"]; _group = param[0,grpNull,[grpNull]]; _unit = param[1,objNull,[objNull]]; if(isNull _group || isNull _unit) exitWith {}; _exit = { [[[0,1],format ["%1 hat die Einladung abgelehnt",player getVariable["zero_var_realname",name player]]],"zero_fnc_broadcast",_unit] call zero_fnc_sendPacket; _gang = _group getVariable "zero_var_gang"; _member = _gang select 3; _index = [getPlayerUID player, _member] call zero_fnc_findIndex; if(_index != -1) then { _member deleteAt _index; _gang set[3,_member]; _group setVariable["zero_var_gang",_gang,true]; }; [[clientOwner,0,[_gang select 0,_gang select 3]],"zero_fnc_updateGang",zero_var_HC1_owner,false] call zero_fnc_sendPacket; }; if (!((group player) getVariable["zero_var_gang",[]] isEqualTo [])) exitWith {"Du musst erst aus deiner aktuellen Gang austreten!" call zero_fnc_msg; call _exit}; _gang = _group getVariable ["zero_var_gang",[]]; if(count _gang < 7) exitWith {"Es ist ein Fehler aufgetreten" call zero_fnc_msg;
call _exit}; _gangName = _gang select 1; _member = _gang select 3; if(!isNull (findDisplay 175462)) exitWith {(format ["Die Einladung zur Gang %1 wurde abgelehnt, da du im Editor bist.", _gangName]) call zero_fnc_msg; call _exit}; _action = [ format["Du wurdest von %1 in die Gang %2 eingeladen",_unit getVariable["zero_var_realname",name _unit],_gangName], format ["Einladung zu %1", _gangName], localize "STR_Global_Yes", localize "STR_Global_No" ] call BIS_fnc_guiMessage; if(!_action) exitWith {call _exit}; disableSerialization; if(!isNull (findDisplay 3100) || !isNull (findDisplay 3200) || !isNull (findDisplay 3300) || !isNull (findDisplay 3400)) then {while {dialog} do {closeDialog 0;};}; [player] joinSilent _group; _gangHouse = _gang select 6; _gangHouse = _gangHouse select 0; if (!(_gangHouse isEqualTo [])) then { [str(_gangHouse)] call zero_fnc_gangHauptquatierUpdate; }; false call zero_fnc_refreshBuffs; [[clientOwner,8,[_gang select 0, getPlayerUID player, playerSide]],"zero_fnc_updateGang",zero_var_HC1_owner,false] call zero_fnc_sendPacket;
