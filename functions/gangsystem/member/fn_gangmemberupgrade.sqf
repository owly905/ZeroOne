if (!hasInterface) exitWith {}; private["_display","_gangPlayerListTitle","_gang","_group","_maxMember","_gangPlayerList","_action","_gangKonto","_price"]; _group = (group player); _gang = _group getVariable ["zero_var_gang",[]]; if(_gang isEqualTo []) exitWith {"Du bist in keiner Gang" call zero_fnc_msg;}; if(count _gang < 7) exitWith {"Es ist ein Fehler aufgetreten" call zero_fnc_msg;}; disableSerialization; _display = findDisplay 3400; if (isNull _display) exitWith {}; _gangPlayerListTitle = _display displayCtrl 3403; _gangPlayerList = _display displayCtrl 3405; _maxMember = _gang select 4; _gangKonto = _gang select 5; _price = if(_maxMember <= 13) then {(_maxMember * 10000)} else {((2 * _maxMember) * 10000)}; _action = [ format["Möchtest du %1 für das Upgrade der Gang von %2 auf %3 maximale Anzahl Member bezahlen?",[_price] call zero_fnc_numberText,[_maxMember] call zero_fnc_numberText,[(_maxMember+4)] call zero_fnc_numberText], "Gang Upgrade", localize "STR_Global_Yes", localize "STR_Global_No" ] call BIS_fnc_guiMessage;
if(!_action) exitWith {}; if(_gangKonto < _price) exitWith { (format ["Deine Gang hat nicht genug Geld auf dem Konto. Es fehlen %1€", [_price - _gangKonto] call zero_fnc_numberText]) call zero_fnc_msg; }; _gangKonto = _gangKonto - _price; _gang set[4,(_maxMember+4)]; _gang set[5,_gangKonto]; (group player) setVariable ["zero_var_gang",_gang,true]; _gangPlayerListTitle ctrlSetStructuredText parseText format["<t align='center' size='1.25'>Gangmitglieder %1/%2</t>",lbSize _gangPlayerList, _gang select 4]; if(typeName (_gang select(count _gang -1)) != "BOOL") then { [[clientOwner,4,[_gang select 0,_gang select 4,_gang select 5]],"zero_fnc_updateGang",zero_var_HC1_owner,false] call zero_fnc_sendPacket; }; ["Das Upgrade wurde erfolgreich durchgeführt!",1] call zero_fnc_msg; [] spawn zero_fnc_gangUpdateGanginfo;
