if (!hasInterface) exitWith {}; private["_mode","_group","_gang","_konto","_display","_titel","_list","_button","_button2"]; _mode = param [0,0,[0]]; disableSerialization; _group = (group player); _gang = _group getVariable ["zero_var_gang",[]]; if(_gang isEqualTo []) exitWith {"Du bist in keiner Gang" call zero_fnc_msg;}; if(count _gang < 7) exitWith {"Es ist ein Fehler aufgetreten" call zero_fnc_msg;}; uiSleep random(0.75); if(!isNull (_group getVariable["zero_var_gangKontoInUse",objNull])) exitWith {"Auf das Konto wird bereits zugegriffen!" call zero_fnc_msg;}; _group setVariable["zero_var_gangKontoInUse",player,true]; _konto = _gang select 5; createDialog "zero_var_ganglist"; _display = findDisplay 3300; if (isNull _display) exitWith {}; _titel = _display displayCtrl 3301; _list = _display displayCtrl 3302; _button = _display displayCtrl 3303; _button2 = _display displayCtrl 3304;
_titel ctrlSetStructuredText parseText format["<t align='left' size='1.3'>Aktuell aktive Mitglieder:</t><t align='right' size='1.3'>%1€</t>",[_konto] call zero_fnc_numberText]; _button ctrlSetText "Überweisen"; _button buttonSetAction 'if(!isNil "zero_var_allowedToTransfer" && serverTime - zero_var_allowedToTransfer < 10) exitWith {"Du kannst nur alle 10 Sekunden Geld überweisen." call zero_fnc_msg;}; if(isNil "zero_var_allowedToTransfer") then {zero_var_allowedToTransfer = serverTime;}; zero_var_allowedToTransfer = serverTime; [] spawn zero_fnc_gangKontoUeberweisen;'; _button2 ctrlShow false; lbClear _list; { _list lbAdd format ["%1", _x getVariable["zero_var_realname",name _x]]; _list lbSetData [(lbSize _list)-1,str(_x)]; } forEach units(group player); [] spawn { waitUntil {isNull (findDisplay 3300)}; uiSleep 5; (group player) setVariable["zero_var_gangKontoInUse",nil,true]; };
