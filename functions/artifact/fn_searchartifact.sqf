if(!hasInterface) exitWith {}; if(playerSide isEqualTo west || playerSide isEqualTo independent) exitWith {}; if(!isNull (objectParent player)) exitWith {(localize "STR_NOTF_VehicleGetOut") call zero_fnc_msg;}; if(player getVariable["zero_var_restrained",false]) exitWith {(localize "STR_General_Zipties_Error") call zero_fnc_msg;}; private _pos = position player; private _exit = false; ["Bleibe in einem Radius von 15m",2] call zero_fnc_msg; disableSerialization; 5 cutRsc ["zero_var_progress","PLAIN"]; private _ui = uiNamespace getVariable "zero_var_progress"; private _progress = _ui displayCtrl 38201; private _pgText = _ui displayCtrl 38202; _pgText ctrlSetText format["Suche Artefakt (0%1)...","%"]; _progress progressSetPosition 0.01; private _cP = 0.0083; zero_var_action_gather = true; while{true} do { uiSleep 1; _cP = _cP + 0.0083; _progress progressSetPosition _cP;
_pgText ctrlSetText format["Suche Artefakt (%1%2)...",round(_cP * 100),"%"]; if(_cP >= 1) exitWith {5 cutText ["","PLAIN"];}; if(player distance _pos > 15.5) exitWith { _exit = true; "Du bist zu weit weg geschwommen!" call zero_fnc_msg;}; if!(alive player) exitWith {_exit = true;}; if(player getVariable["zero_var_restrained",false]) exitWith {_exit = true;}; if(!isNull (ObjectParent player)) exitWith {"Du sitzt in einem Fahrzeug" call zero_fnc_msg; _exit = true;}; }; zero_var_action_gather = false; 5 cutText ["","PLAIN"]; if(_exit) exitWith {}; private _rnd = round(random(10)); if(_rnd < 3) exitWith {"Du hast nichts gefunden" call zero_fnc_msg}; if(!([true,"artifact",1] call zero_fnc_handleZOInv)) exitWith { "Du hast nicht genug Platz!" call zero_fnc_msg;}; [format["Du hast ein %1 gefunden", getText(missionConfigFile >> "zero_CfgItems" >> "artifact" >> "name")],1] call zero_fnc_msg;
