if (!hasInterface) exitWith {}; private["_control","_data","_select","_menge","_value","_gewicht","_maxgewicht","_maxladung","_itemWeight","_titel","_veh_data"]; disableSerialization; _control = _this select 0; _menge = (findDisplay 3100) displayCtrl 3106; _titel = (findDisplay 3100) displayCtrl 3105; _select = _this select 1; _data = _control lbData _select; _value = _control lbValue _select; zero_var_koffer_last_change = [(_this select 0),(_this select 1)]; _veh_data = [(getNumber(missionConfigFile >> "zero_CfgVehicles" >> (typeOf zero_var_trunkCar) >> "trunk")),(zero_var_trunk_vehicle select 1)]; if(_veh_data select 0 == -1) exitWith {closeDialog 0}; if (_control isEqualTo ((findDisplay 3100) displayCtrl 3103)) then { _titel ctrlSetStructuredText parseText format[ "<t align='left'>%1 - %2 %4/%5 </t>" + "<t align='right'><t color=%3>Inventar - %6 %7/%8</t> </t>", (localize "STR_MISC_VehStorage"), getText(configFile >> "CfgVehicles" >> (typeOf zero_var_trunkCar) >> "displayName"), "'#8cff9b'", _veh_data select 1, _veh_data select 0, name player, zero_var_carryWeight, zero_var_maxWeight ]; if (_select isEqualTo -1) exitWith {_menge ctrlEnable false}; _gewicht = (zero_var_trunk_vehicle select 1); _itemWeight = (getNumber(missionConfigFile >> "zero_CfgItems" >> _data >> "weight"));
_maxgewicht = (getNumber(missionConfigFile >> "zero_CfgVehicles" >> (typeOf zero_var_trunkCar) >> "trunk")); _maxladung = floor((_maxgewicht - _gewicht)/_itemWeight); if (_maxladung <= 0) then {_value=0;}; if (!(_value isEqualTo 0) && (_maxladung <= _value)) then {_value = _maxladung;}; _menge ctrlSetText str _value; if (_value isEqualTo 0) then {_menge ctrlEnable false} else {_menge ctrlEnable true}; } else { _titel ctrlSetStructuredText parseText format[ "<t align='left'><t color=%3>%1 - %2 %4/%5 </t></t>" + "<t align='right'>Inventar - %6 %7/%8 </t>", (localize "STR_MISC_VehStorage"), getText(configFile >> "CfgVehicles" >> (typeOf zero_var_trunkCar) >> "displayName"), "'#8cff9b'", _veh_data select 1, _veh_data select 0, name player, zero_var_carryWeight, zero_var_maxWeight ]; if (_select isEqualTo -1) exitWith {_menge ctrlEnable false}; _gewicht = zero_var_carryWeight; _itemWeight = (getNumber(missionConfigFile >> "zero_CfgItems" >> _data >> "weight")); _maxgewicht = zero_var_maxWeight; _maxladung = floor((_maxgewicht - _gewicht)/_itemWeight); if (_maxladung <= 0) then {_value=0;}; if (!(_value isEqualTo 0) && (_maxladung <= _value)) then {_value = _maxladung;}; _menge ctrlSetText str _value; if (_value isEqualTo 0) then {_menge ctrlEnable false} else {_menge ctrlEnable true}; };
