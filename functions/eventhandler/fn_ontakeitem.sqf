if (!hasInterface) exitWith {}; if !( params [ ["_unit", objNull, [objNull]], ["_container", objNull, [objNull]], ["_itm", "", [""]] ] ) exitWith {true}; uiSleep random(0.5); _container setVariable[ "zero_var_antiDupe", [player,(netId player)], true ]; uiSleep random(0.5); if !( _container getVariable[ "zero_var_antiDupe", [player,(netId player)] ] isEqualTo player ) exitWith { private _details = [_itm] call zero_fnc_fetchCfgDetails; if( ( ( count( _details ) ) >= 16 ) && { ( _details select 6 ) isEqualTo "CfgVehicles" } ) then { [ format ["DUPE: %1 (%2, %6), (%3, %4)", player getVariable ["zero_var_realname", name player], getPlayerUID player, _itm, typeOf _container, playerSide ] ] call zero_fnc_zoLog; waitUntil{ ( backpack player ) isEqualTo _itm }; removeBackpackGlobal player; }; }; if(zero_var_playerSide isEqualTo civilian && {_itm in ["srifle_DMR_05_blk_F","srifle_DMR_05_tan_F","srifle_DMR_05_hex_F","LMG_Mk200_F","LMG_Zafir_F","MMG_01_hex_F","MMG_01_tan_F","MMG_02_black_F","MMG_02_camo_F","MMG_02_sand_F","srifle_DMR_02_F","srifle_DMR_02_camo_F","srifle_DMR_02_sniper_F","srifle_LRR_F","srifle_LRR_camo_F","srifle_GM6_F","srifle_GM6_camo_F","srifle_DMR_04_F","srifle_DMR_04_tan_F"]}) exitWith { "Du kannst die Waffe als Zivilist nicht benutzen!" call zero_fnc_msg; titleText["Du kannst die Waffe als Zivilist nicht benutzen!","PLAIN"]; [[player, "zero_var_fnc_createVehicleArray", ["GroundWeaponHolder", (position player), [], 0, "CAN_COLLIDE"]], "zero_fnc_remoteExecuteCommand", zero_var_HC1_owner] call zero_fnc_sendPacket; waitUntil {!isNil "zero_var_createVehicleResponse"}; private _holder = zero_var_createVehicleResponse; zero_var_createVehicleResponse = nil; _holder addWeaponCargoGlobal [_itm, 1]; player removeWeaponGlobal (_itm); {if((weaponCargo _x) isEqualTo []) then {[_x] call zero_fnc_deleteVehicle}} forEach (nearestObjects[position player,["GroundWeaponHolder"],3]); true; }; private _exit = false; if (playerSide != west) then { private _forbiddenItems = ["laserdesignator","5rnd_127x108_apds_mag","handgrenade_stone","10rnd_50bw_mag_f","arifle_MX_GL_F","3Rnd_HE_Grenade_shell"]; if(toLower(_itm) in _forbiddenItems) then { [_itm,false,false,false,false] spawn zero_fnc_handleZOItem; _exit = true; };
if (isClass (configFile >> "CfgVehicles" >> _itm)) then { [] spawn zero_fnc_checkInventory; }; }; if (playerSide != independent) then { private _forbiddenItems = ["nvgoggles_indep"]; if(toLower(_itm) in _forbiddenItems) then { [_itm,false,false,false,false] spawn zero_fnc_handleZOItem; _exit = true; }; if (isClass (configFile >> "CfgVehicles" >> _itm)) then { [] spawn zero_fnc_checkInventory; }; }; if (_exit) exitWith {true}; private _details = [_itm] call zero_fnc_fetchCfgDetails; if(count _details >= 16 && {(_details select 6) == "CfgWeapons" && (_details select 5) == 801}) then { if(!(player isUniformAllowed _itm)) then { if(uniform player != "") then { _uniformItems = []; _action = [ format["MÃ¶chtest du die Uniform %1 direkt anziehen? Deine alte Uniform wird entfernt!",_details select 1], format["Uniform direkt anziehen"], localize "STR_Global_Yes", localize "STR_Global_No" ] call BIS_fnc_guiMessage; if(!_action) exitWith {_exit = true;}; private _items = uniformItems player; removeUniform player; private _rucksackinhalt = backpackItems player; _rucksackinhalt deleteAt (_rucksackinhalt find _itm); clearAllItemsFromBackpack player; {player addItemToBackpack _x}forEach _rucksackinhalt; player forceAddUniform _itm; if(!isNil "_items") then { {player addItemToUniform _x} forEach _items; }; }else{ player forceAddUniform _itm; private _rucksackinhalt = backpackItems player; _rucksackinhalt deleteAt (_rucksackinhalt find _itm); clearAllItemsFromBackpack player; {player addItemToBackpack _x;}forEach _rucksackinhalt; }; }; }; if (_exit) exitWith {true}; private _itemsToLog = ["launch_RPG32_F","RPG32_HE_F","launch_RPG32_ghex_F","launch_RPG7_F","H_Beret_blk","H_Beret_Colonel","H_Beret_02","launch_MRAWS_sand_F","launch_MRAWS_green_F","launch_MRAWS_olive_F","MRAWS_HE_F","V_PlateCarrierSpec_blk","V_PlateCarrierGL_blk","mg_zafir","mmg_01","srifle_llr","srifle_dmr","arifle_mx","arifle_katiba","lmg_mk200","arifle_ak12","srifle_dmg","mmg_02","arifle_arx","H_Beret","V_PlateCarrierSpec_blk","HandGrenade_Stone","5Rnd_127x108_APDS_Mag","10Rnd_50BW_Mag_F","O_HMG_01_weapon_F","O_HMG_01_support_F","O_HMG_01_high_weapon_F","O_HMG_01_support_high_F"]; { if((toLower(_itm) find _x) != -1) exitWith { [format ["ITEM TAKE: %1 (%2, %3) hat %4 aufgenommen", player getVariable ["zero_var_realname", name player], playerSide, getPlayerUID player, _details param [1]]] call zero_fnc_zoLog; }; }forEach _itemsToLog;
