if (!hasInterface) exitWith {}; private["_dialog","_skillList","_levelDialog","_curPointsDialog","_neededPointsDialog","_curAdvantageDialog","_nextAdvantageDialog","_maxAdvantageDialog","_sel","_description","_text","_result"]; disableSerialization; _dialog = findDisplay 1000; _skillList = _dialog displayCtrl 1003; _description = _dialog displayCtrl 1004; _levelDialog = _dialog displayCtrl 1005; _curPointsDialog = _dialog displayCtrl 1006; _neededPointsDialog = _dialog displayCtrl 1007; _curAdvantageDialog = _dialog displayCtrl 1008; _nextAdvantageDialog = _dialog displayCtrl 1009; _maxAdvantageDialog = _dialog displayCtrl 1010; if(lbCurSel _skillList isEqualTo -1) exitWith {"Du hast nichts ausgew√§hlt" call zero_fnc_msg;}; _sel = _skillList lbData (lbCurSel _skillList); if(isNil '_sel') exitWith {}; if(_sel isEqualTo "") exitWith { _levelDialog ctrlSetStructuredText parseText format[""]; _curPointsDialog ctrlSetStructuredText parseText format[""]; _neededPointsDialog ctrlSetStructuredText parseText format[""]; _curAdvantageDialog ctrlSetStructuredText parseText (localize "STR_Skill_Curr_Advantage"); _nextAdvantageDialog ctrlSetStructuredText parseText (localize "STR_Skill_Next_Advantage"); _maxAdvantageDialog ctrlSetStructuredText parseText (localize "STR_Skill_Max_Advantage"); }; _result = [_sel] call zero_fnc_showSkills; if (count _result isEqualTo 0) exitWith { _levelDialog ctrlSetStructuredText parseText format[""]; _curPointsDialog ctrlSetStructuredText parseText format[""]; _neededPointsDialog ctrlSetStructuredText parseText format[""]; _curAdvantageDialog ctrlSetStructuredText parseText (localize "STR_Skill_Curr_Advantage"); _nextAdvantageDialog ctrlSetStructuredText parseText (localize "STR_Skill_Next_Advantage"); _maxAdvantageDialog ctrlSetStructuredText parseText (localize "STR_Skill_Max_Advantage"); }; _levelDialog ctrlSetStructuredText parseText format[ "<t align='center' size='2'>%1</t>",[_result select 1] call zero_fnc_numberText ]; _curPointsDialog ctrlSetStructuredText parseText format[ "<t align='center' size='2'>%1</t>",[_result select 0] call zero_fnc_numberText ];
_neededPointsDialog ctrlSetStructuredText parseText format[ "<t align='center' size='2'>%1</t>", if(_result select 1 >= 100) then { "Maximum erreicht!" }else{ [(_result select 2) - (_result select 0)] call zero_fnc_numberText } ]; _curAdvantageDialog ctrlSetStructuredText parseText (localize "STR_Skill_Curr_Advantage" + (_result select 3)); _nextAdvantageDialog ctrlSetStructuredText parseText (localize "STR_Skill_Next_Advantage" + (_result select 4)); _maxAdvantageDialog ctrlSetStructuredText parseText (localize "STR_Skill_Max_Advantage" + (_result select 5)); _text = switch (_sel) do { case "fruit": {(localize "STR_Skill_Fruit_Skill_Description")}; case "grape": {(localize "STR_Skill_Grape_Skill_Description")}; case "post": {(localize "STR_Skill_Post_Skill_Description")}; case "sand": {(localize "STR_Skill_Sand_Skill_Description")}; case "ore": {(localize "STR_Skill_Ore_Skill_Description")}; case "fossil": {(localize "STR_Skill_Fossil_Skill_Description")}; case "rock": {(localize "STR_Skill_Rock_Skill_Description")}; case "drugs": {(localize "STR_Skill_Drugs_Skill_Description")}; case "sand_process":{(localize "STR_Skill_Sand_Process_Skill_Description")}; case "grape_process": {(localize "STR_Skill_Grape_Process_Skill_Description")}; case "ore_process": {(localize "STR_Skill_Ore_Process_Skill_Description")}; case "fossil_process": {(localize "STR_Skill_Fossil_Process_Skill_Description")}; case "rock_process": {(localize "STR_Skill_Rock_Process_Skill_Description")}; case "drugs_process": {(localize "STR_Skill_Drugs_Process_Skill_Description")}; case "boltcutter": {(localize "STR_Skill_Boltcutter_Skill_Description")}; case "repair": {(localize "STR_Skill_Repair_Skill_Description")}; case "revive": {(localize "STR_Skill_Revive_Skill_Description")}; case "impound": {(localize "STR_Skill_Impound_Skill_Description")}; case "selfhealing": {(localize "STR_Skill_Selfhealing_Skill_Description")}; case "lockpick": {(localize "STR_Skill_Lockpick_Skill_Description")}; case "search": {(localize "STR_Skill_Search_Skill_Description")}; case "stamina": {(localize "STR_Skill_Stamina_Skill_Description")}; default {""}; }; _description ctrlSetStructuredText parseText _text;
