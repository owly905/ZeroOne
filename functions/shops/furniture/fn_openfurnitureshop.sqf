disableSerialization; createDialog "zero_var_furnitureShop"; private _display = findDisplay 20000; _display displaySetEventHandler ["Unload","zero_var_furnitureShopCart = nil;zero_var_furnitureShopCartWeight=nil; true"]; _display displayAddEventHandler ["KeyDown", "if((_this select 1) == 1) then {if(!isNil 'zero_var_furnitureShopCart') then { 'Du hast noch etwas im Warenkorb. Kaufe oder benutze den X Button.' call zero_fnc_msg; true}else{false}};"]; private _background = _display ctrlCreate ["RscPicture",-1]; _background ctrlSetText "Resources\Textures\Icons\background.jpg"; _background ctrlSetPosition [0.215941 * safeZoneW + safeZoneX, 0.113221 * safeZoneH + safeZoneY,0.566481 * safeZoneW,0.739284 * safeZoneH]; _background ctrlCommit 0; private _title =_display ctrlCreate ["RscTitle",20001]; _title ctrlSetText "Möbelhaus"; _title ctrlSetPosition [0.304992 * safeZoneW + safeZoneX,0.118856 * safeZoneH + safeZoneY,0.17018 * safeZoneW,0.0440162 * safeZoneH]; _title ctrlCommit 0; private _objName = _display ctrlCreate ["RscStructuredText",20002]; _objName ctrlSetStructuredText parseText format ["<t size='1.1'>Name</t>"]; _objName ctrlSetPosition [0.415 * safeZoneW + safeZoneX,0.23 * safeZoneH + safeZoneY,0.17 * safeZoneW,0.05 * safeZoneH]; _objName ctrlCommit 0; private _objPicture = _display ctrlCreate ["RscPictureKeepAspect",20003]; _objPicture ctrlSetText "Resources\Textures\Icons\furnitureShopPreview.jpg"; _objPicture ctrlSetPosition [0.415 * safeZoneW + safeZoneX,0.28 * safeZoneH + safeZoneY,0.2 * safeZoneW,0.23 * safeZoneH]; _objPicture ctrlCommit 0; private _objPrice =_display ctrlCreate ["RscStructuredText",20004]; _objPrice ctrlSetStructuredText parseText format ["<t size='1.5'>Preis:</t>"]; _objPrice ctrlSetPosition [0.415 * safeZoneW + safeZoneX,0.53 * safeZoneH + safeZoneY,0.17 * safeZoneW,0.05 * safeZoneH]; _objPrice ctrlCommit 0; private _objWeight = _display ctrlCreate ["RscStructuredText",20005]; _objWeight ctrlSetStructuredText parseText format ["<t size='1.1'>Gewicht:</t>"]; _objWeight ctrlSetPosition [0.415 * safeZoneW + safeZoneX,0.565 * safeZoneH + safeZoneY,0.17 * safeZoneW,0.05 * safeZoneH]; _objWeight ctrlCommit 0; private _cartPrice = _display ctrlCreate ["RscStructuredText",20006]; _cartPrice ctrlSetText "Warenkorb: 0€"; _cartPrice ctrlSetPosition [0.63 * safeZoneW + safeZoneX,0.23 * safeZoneH + safeZoneY,0.17 * safeZoneW,0.05 * safeZoneH]; _cartPrice ctrlCommit 0; private _playerMoney = _display ctrlCreate ["RscStructuredText",20006]; _playerMoney ctrlSetText format ["Bar: %1€",[([3, 0] call zero_fnc_Z0Check)] call zero_fnc_numberText]; _playerMoney ctrlSetPosition [0.63 * safeZoneW + safeZoneX,0.25 * safeZoneH + safeZoneY,0.17 * safeZoneW,0.05 * safeZoneH]; _playerMoney ctrlCommit 0; private _playerWeight = _display ctrlCreate ["RscStructuredText",20007]; _playerWeight ctrlSetText format ["Gewicht: %1/%2",zero_var_carryWeight,zero_var_maxWeight]; _playerWeight ctrlSetPosition [0.7 * safeZoneW + safeZoneX,0.18 * safeZoneH + safeZoneY,0.17 * safeZoneW,0.05 * safeZoneH];
_playerWeight ctrlCommit 0; private _cartTree = _display ctrlCreate ["RscTree",20008]; _cartTree ctrlSetPosition [0.63 * safeZoneW + safeZoneX,0.28 * safeZoneH + safeZoneY,0.14 * safeZoneW,0.4 * safeZoneH]; _cartTree ctrlSetBackgroundColor [0.18,0.2,0.259,0.8]; _cartTree ctrlSetEventHandler ["TreeDblClick","call zero_fnc_removeFromCartFurnitureShop; true"]; _cartTree ctrlCommit 0; private _tree = _display ctrlCreate ["RscTree", 20009]; _tree ctrlSetPosition [0.23 * safeZoneW + safeZoneX,0.23 * safeZoneH + safeZoneY,0.17 * safeZoneW,0.55 * safeZoneH]; _tree ctrlSetBackgroundColor [0.18,0.2,0.259,0.8]; _tree ctrlSetEventHandler ["TreeSelChanged","call zero_fnc_changePictureFurnitureShop; true"]; _tree ctrlSetEventHandler ["TreeDblClick","call zero_fnc_addToCartFurnitureShop; true"]; _tree ctrlCommit 0; private _exit = _display ctrlCreate ["RscButton",-1]; _exit ctrlSetText ""; _exit ctrlSetPosition [0.76 * safeZoneW + safeZoneX,0.126 * safeZoneH + safeZoneY,0.015 * safeZoneW,0.026 * safeZoneH]; _exit buttonSetAction "if(!isNil 'zero_var_allowedToRefresh' && {serverTime - zero_var_allowedToRefresh < 0.1}) exitWith {};zero_var_allowedToRefresh = serverTime;if(!isNil 'zero_var_furnitureShopCart') then {[] spawn { private _action = ['Möchtest du wirklich den Einkauf beenden?','Einkauf beenden',localize 'STR_Global_Yes',localize 'STR_Global_Cancel'] call BIS_fnc_guiMessage;if(_action) then { closeDialog 0;};};}else{closeDialog 0};"; _exit ctrlSetBackgroundColor [-1,-1,-1,-1]; _exit ctrlCommit 0; private _addToCart = _display ctrlCreate ["RscButton",20010]; _addToCart ctrlSetText "In den Warenkorb"; _addToCart ctrlSetPosition [0.415 * safeZoneW + safeZoneX,0.61 * safeZoneH + safeZoneY,0.2 * safeZoneW,0.04 * safeZoneH]; _addToCart buttonSetAction "if(!isNil 'zero_var_allowedToRefresh' && {serverTime - zero_var_allowedToRefresh < 0.1}) exitWith {};zero_var_allowedToRefresh = serverTime;call zero_fnc_addToCartFurnitureShop"; _addToCart ctrlSetBackgroundColor [-1,-1,-1,-1]; _addToCart ctrlCommit 0; private _buyCart = _display ctrlCreate ["RscButton",20011]; _buyCart ctrlSetText "Abschließend kaufen"; _buyCart ctrlSetPosition [0.415 * safeZoneW + safeZoneX,0.7 * safeZoneH + safeZoneY,0.2 * safeZoneW,0.08 * safeZoneH]; _buyCart buttonSetAction "if(!isNil 'zero_var_allowedToRefresh' && {serverTime - zero_var_allowedToRefresh < 0.1}) exitWith {};zero_var_allowedToRefresh = serverTime;call zero_fnc_buyCartFurnitureShop"; _buyCart ctrlSetBackgroundColor [-1,-1,-1,-1]; _buyCart ctrlCommit 0; private _removeCart = _display ctrlCreate ["RscButton",20012]; _removeCart ctrlSetText "Aus Warenkorb entfernen"; _removeCart ctrlSetPosition [0.63 * safeZoneW + safeZoneX,0.7 * safeZoneH + safeZoneY,0.14 * safeZoneW,0.08 * safeZoneH]; _removeCart buttonSetAction "if(!isNil 'zero_var_allowedToRefresh' && {serverTime - zero_var_allowedToRefresh < 0.1}) exitWith {};zero_var_allowedToRefresh = serverTime;call zero_fnc_removeFromCartFurnitureShop"; _removeCart ctrlCommit 0; zero_var_furnitureShopCartWeight = 0; call zero_fnc_fillFurnitureShop;
