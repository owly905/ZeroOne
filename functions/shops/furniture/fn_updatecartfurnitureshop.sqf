if(isNil "zero_var_furnitureShopCart") exitWith {}; disableSerialization; private _display = (findDisplay 20000); private _cartPrice = _display displayCtrl 20006; private _playerWeight = _display displayCtrl 20007; private _cartTree = _display displayCtrl 20008; private _addToCart = _display displayCtrl 20010; private _buyCart = _display displayCtrl 20011; private _price = 0; private _weight = 0; private _current = (tvCurSel _cartTree); tvClear _cartTree; { _cartTree tvAdd [[],format ["%1 [%2]", getText(missionConfigFile >> "zero_CfgItems" >> (_x select 0) >> "name"), _x select 3]]; _cartTree tvSetPicture [[_forEachIndex], getText(configFile >> "CfgVehicles" >> (getText(missionConfigFile >> "zero_Furniture" >> "furnitureItems" >> (_x select 0) >> "className")) >> "editorPreview")]; _cartTree tvSetData[[_forEachIndex], str(_x)]; _cartTree tvSetTooltip[[_forEachIndex], format ["%1 [%2]", getText(missionConfigFile >> "zero_CfgItems" >> (_x select 0) >> "name"), _x select 3]];
_price = _price + ((_x select 1) * (_x select 3)); _weight = _weight + ((_x select 2) * (_x select 3)); } forEach zero_var_furnitureShopCart; zero_var_furnitureShopCartWeight = _weight; if(_current select 0 < (_cartTree tvCount [])) then { _cartTree tvSetCurSel _current; }; _cartPrice ctrlSetText format ["Warenkorb: %1â‚¬", [_price] call zero_fnc_numberText]; _playerWeight ctrlSetText format ["Gewicht: %1/%2",zero_var_carryWeight + zero_var_furnitureShopCartWeight,zero_var_maxWeight]; if(zero_var_carryWeight + zero_var_furnitureShopCartWeight >= zero_var_maxWeight) then { _addToCart ctrlEnable false; _addToCart ctrlSetTooltip "Du kannst nicht mehr tragen!"; _buyCart ctrlEnable false; _buyCart ctrlSetTooltip "Du hast zu viel Gewicht im Warenkorb!"; }else{ _addToCart ctrlEnable true; _addToCart ctrlSetTooltip ""; _buyCart ctrlEnable true; _buyCart ctrlSetTooltip ""; };
