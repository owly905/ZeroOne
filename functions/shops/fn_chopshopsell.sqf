if (!hasInterface) exitWith {}; disableSerialization; private["_price","_vehicle","_nearVehicles","_price2","_text","_className","_displayName","_owners"]; if(!zero_var_allowedToChop) exitWith {(localize "STR_NOTF_Sell_Vehicle_Stop") call zero_fnc_msg;}; _vehicle = param[0,objNull,[objNull]]; _text = param[1,"",[""]]; _price = param[2,0,[0]]; if(isNull _vehicle) exitWith {}; if(!((crew _vehicle) isEqualTo [])) exitWith {"Das Fahrzeug muss leer sein." call zero_fnc_msg;}; if(_vehicle getVariable ["zero_var_noobinsurance", false]) exitWith { _string = selectRandom [ "Sorry Bro, aber so ein neues Fahrzeug ist sehr schwer an den Mann zu bringen.", "Alter, was denkst du dir, wieso bringst du mir so eine Karre? Die glÃ¤nzt ja noch!", "Du Lachsnacken, sowas brauchst du gar nicht versuchen, keiner wird dir son Mobil abkaufen!" ]; [_string,-1,"",true] call zero_fnc_msg; }; if(zero_var_allowedToChop) then { zero_var_allowedToChop = false; [] spawn { uiSleep 300; zero_var_allowedToChop = true; }; }; uiSleep (random 0.9); if(_vehicle getVariable ["zero_var_anti_dupe", false]) exitWith {};
_vehicle setVariable["zero_var_anti_dupe",true,true]; _className = typeOf _vehicle; _displayName = getText(configFile >> "CfgVehicles" >> _className >> "displayName"); if(_text != _displayName) exitWith {"Wrong vehicle!" call zero_fnc_msg;_vehicle setVariable["zero_var_anti_dupe",nil,true];}; _owners = _vehicle getVariable "zero_var_vehicle_owners"; if(isNil {_owners}) exitWith { [format ["WARNING: %1 (%2, %3) hat versucht ein %4 ohne Besitzer zu verkaufen.", player getVariable["zero_var_realname",name player], getPlayerUID player, playerSide, getText(missionConfigFile >> "zero_CfgVehicles" >> _classname >> "logname")]] call zero_fnc_zoLog; "Du kannst dieses Fahrzeug nicht verkaufen." call zero_fnc_msg; [_vehicle] call zero_fnc_deleteVehicle; }; [localize "STR_Shop_ChopShopSelling",-1,"",true] call zero_fnc_msg; zero_var_action_inUse = true; [[player,_vehicle,_price,(([5, 0] call zero_fnc_Z0Check) + _price),clientOwner],"zero_fnc_chopShopSellVeh",zero_var_HC1_owner,false] call zero_fnc_sendPacket; [9,getPlayerUID player,profileName] call zero_fnc_wantedViaScript; closeDialog 0;
