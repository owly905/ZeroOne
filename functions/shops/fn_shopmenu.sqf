if (!hasInterface) exitWith {}; zero_var_store = param[0,"",[""]]; private _shop = param[1,[],[[]]]; private _shopTitle = param[2,"",[""]]; private _isHideout = param[3,false,[false]]; private _exit = false; if (_isHideout) then { _exit = call zero_fnc_checkHideout; }; if (_exit) exitWith {}; createDialog "zero_var_shop"; disableSerialization; if (zero_var_store == "reb" && !zero_var_license_civ_rebel) exitWith {(localize "STR_Shop_NotaReb") call zero_fnc_msg; closeDialog 0; }; if (zero_var_store == "opfor" && (zero_var_playerSide != east)) exitWith {"Kein Rebelle (Opfor)" call zero_fnc_msg; closeDialog 0; }; ctrlSetText[3101,_shopTitle]; (findDisplay 3100) displayCtrl 3106 ctrlEnable false; private _c = (missionNamespace getVariable ((["kleider",0] call zero_fnc_licenseType) select 0)); if ((isNil "_c") || (playerSide in [west,independent]) ) then {_c = true;}; private _h = (missionNamespace getVariable ((["hut",0] call zero_fnc_licenseType) select 0)); if ((isNil "_h") || (playerSide in [west,independent]) ) then {_h = true;}; private _g = (missionNamespace getVariable ((["glass",0] call zero_fnc_licenseType) select 0)); if ((isNil "_g") || (playerSide in [west,independent]) ) then {_g = true;}; private _v = (missionNamespace getVariable ((["vest",0] call zero_fnc_licenseType) select 0)); if ((isNil "_v") || (playerSide in [west,independent]) ) then {_v = true;}; private _b = (missionNamespace getVariable ((["rucksack",0] call zero_fnc_licenseType) select 0)); if ((isNil "_b") || (playerSide in [west,independent]) ) then {_b = true;}; private _w = (missionNamespace getVariable ((["gun",0] call zero_fnc_licenseType) select 0)); if (zero_var_store == "gang") then {_w = true;}; if ((isNil "_w") || (playerSide in [west,independent]) || zero_var_license_civ_rebel ) then {_w = true;}; private _i = (missionNamespace getVariable ((["item",0] call zero_fnc_licenseType) select 0));
if ((isNil "_i") || (playerSide in [west,independent]) ) then {_i = true;}; private _d = (missionNamespace getVariable ((["dive",0] call zero_fnc_licenseType) select 0)); if ((isNil "_d") || (playerSide in [west,independent]) ) then {_d = true;}; private _k = (missionNamespace getVariable ((["kart",0] call zero_fnc_licenseType) select 0)); if ((isNil "_k") || (playerSide in [west,independent]) ) then {_k = true;}; private _god = (missionNamespace getVariable ((["god",0] call zero_fnc_licenseType) select 0)); if ((isNil "_god") || (playerSide in [west,independent]) ) then {_god = true;}; if(isNull (findDisplay 3100)) exitWith {}; private _list = (findDisplay 3100) displayCtrl 3102; private _filter = (findDisplay 3100) displayCtrl 3103; private _gang = (group player) getVariable ["zero_var_gang",[]]; if(_gang isEqualTo [] || {(typeName (_gang select(count _gang -1)) == "BOOL")}) then { ctrlEnable[3110,false]; }else{ private _index = [getPlayerUID player, _gang select 3] call zero_fnc_findIndex; if(_index isEqualTo -1) then { ctrlEnable[3110,false]; }else{ if((((_gang select 3) select _index) select 1) < 2) then { ctrlEnable[3110,false]; }; }; }; lbClear _filter; lbClear _list; if ("c" in _shop && _c) then {_filter lbAdd localize "STR_Shop_UI_Clothing";}; if ("h" in _shop && _h) then {_filter lbAdd localize "STR_Shop_UI_Hats";}; if ("g" in _shop && _g) then {_filter lbAdd localize "STR_Shop_UI_Glasses";}; if ("v" in _shop && _v) then {_filter lbAdd localize "STR_Shop_UI_Vests";}; if ("b" in _shop && _b) then {_filter lbAdd localize "STR_Shop_UI_Backpack";}; if ("w" in _shop && _w) then {_filter lbAdd localize "STR_Shop_Weapon";}; if ("i" in _shop && _i) then {_filter lbAdd localize "STR_Shop_Item";}; if ("d" in _shop && _d) then {_filter lbAdd localize "STR_Shop_Dive";}; if ("k" in _shop && _k) then {_filter lbAdd localize "STR_Shop_kart";}; if ("god" in _shop && _god) then {_filter lbAdd localize "STR_Shop_god";}; _filter lbSetCurSel 0; _list lbSetCurSel 0; waitUntil {isNull (findDisplay 3100)}; [] call zero_fnc_saveGear;
