if (!hasInterface) exitWith {}; private["_itm","_type","_legacyItems","_ret","_weaponArray","_weapon","_newItems","_cfgInfo","_cfg"]; _itm = param[0,"",[""]]; _type = param[1,0,[0]]; if(_itm == "" || _type == 0) exitWith {0}; _ret = 0; _weaponArray = [primaryWeapon player, secondaryWeapon player, handgunWeapon player]; { if(_ret != 0) exitWith {}; if(_x != "") then { _weapon = _x; _cfgInfo = [_weapon,"CfgWeapons"] call zero_fnc_fetchCfgDetails; _legacyItems = ((_cfgInfo select 10) + (_cfgInfo select 11) + (_cfgInfo select 12) + (_cfgInfo select 17)); _newItems = _cfgInfo select 14; if(count _legacyItems > 0) then { for "_i" from 0 to (count _legacyItems)-1 do{ _legacyItems set[_i,toLower(_legacyItems select _i)];
}; if((toLower _itm) in _legacyItems) exitWith { _ret = switch(_weapon) do { case (primaryWeapon player): {1}; case (secondaryWeapon player): {2}; case (handgunWeapon player): {3}; default {0}; }; }; }; if(count _newItems > 0) then { { if(_ret != 0) exitWith {}; _cfg = getNumber(configFile >> "CfgWeapons" >> _weapon >> "WeaponSlotsInfo" >> _x >> "compatibleItems" >> _itm); if(isNil "_cfg") then {_cfg = 0;}; if(_cfg == 1) exitWith { _ret = switch(_weapon) do { case (primaryWeapon player): {1}; case (secondaryWeapon player): {2}; case (handgunWeapon player): {3}; default {0}; }; }; } forEach _newItems; if(_ret != 0) exitWith {}; }; }; } forEach _weaponArray; _ret;
