if (isServer) exitWith {}; private["_uniform","_vest","_player","_owner"]; _uniform = param[0,"",[""]]; _vest = param[1,"",[""]]; _player = param[2,objNull,[objNull]]; _owner = param[3,-1,[0]]; if(_owner != clientOwner) then { if(isNull _player) exitWith {}; [[(uniform _player),(vest _player),_player,_owner],"zero_fnc_fixUniform",_owner,false] call zero_fnc_sendPacket; }else{ [_uniform,_vest] spawn { private _uniform = param[0,"",[""]]; private _vest = param[1,"",[""]]; private _fixUniform = ((uniform player) != _uniform); private _fixVest = ((vest player) != _vest); if(_fixUniform) then { private _uniformItems = uniformItems player;
removeUniform player; if(_uniform != "") then { private _handle = [_uniform,true,false,false,false] spawn zero_fnc_handleZOItem; waitUntil {scriptDone _handle}; { [_x,true,false,false,false] spawn zero_fnc_handleZOItem; } forEach _uniformItems; }; }; if(_fixVest) then { private _vestItems = vestItems player; removeVest player; if(_vest != "") then { private _handle = [_vest,true,false,false,false] spawn zero_fnc_handleZOItem; waitUntil {scriptDone _handle}; { [_x,true,false,false,false] spawn zero_fnc_handleZOItem; } forEach _vestItems; }; }; }; };
