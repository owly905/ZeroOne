if (!hasInterface) exitWith {}; private["_unit","_val","_itm","_apply","_action","_type"]; disableSerialization; if(!zero_var_allowedToGive) exitWith {(localize "STR_NOTF_GiveItem") call zero_fnc_msg;}; _val = ctrlText 2010; ctrlShow[2002,false]; if((lbCurSel 2022) isEqualTo -1) exitWith {"Es wurde keiner ausgew채hlt!" call zero_fnc_msg; ctrlShow[2002,true];}; if((lbCurSel 2005) isEqualTo -1) exitWith {"Du hast kein Item ausgew채hlt!" call zero_fnc_msg; ctrlShow[2002,true];}; _unit = lbData [2022,lbCurSel 2022]; _unit = call compile format["%1",_unit]; _itm = lbData [2005,(lbCurSel 2005)]; if(isNil "_unit" || _unit == player) exitWith {ctrlShow[2002,true];}; if(isNull _unit || (player distance _unit) > 5) exitWith {ctrlShow[2002,true]; "Der ausgew채hlte Spieler ist nicht in Reichweite" call zero_fnc_msg;}; if(!([_val] call zero_fnc_isNumber)) exitWith {"Das ist keine Zahl!" call zero_fnc_msg;ctrlShow[2002,true];}; if(parseNumber(_val) <= 0) exitWith {"Du musst mehr als 0 Items ausw채hlen!" call zero_fnc_msg;ctrlShow[2002,true];}; if(zero_var_allowedToGive) then { zero_var_allowedToGive = false;
[] spawn { uiSleep 5; zero_var_allowedToGive = true; }; }; _apply = ""; if(_itm == "med_marijuana" && {playerSide isEqualTo independent}) then { _action = [ format["Soll das medizinische Marihuana direkt verabreicht werden?"], "Medizinisches Marijuana verabreichen", localize "STR_Global_Yes", localize "STR_Global_No" ] call BIS_fnc_guiMessage; if(_action) then { _apply = "med_marijuana"; }; }; if(_itm == "narcosis" && {playerSide isEqualTo independent}) then { _apply = "narcosis"; }; if(_itm == "adrenalin") exitWith {"Das kannst du nicht weitergeben" call zero_fnc_msg;}; if(!([false,_itm,(parseNumber _val)] call zero_fnc_handleZOInv)) exitWith {"Du hast nicht genug von den Items dabei!" call zero_fnc_msg;ctrlShow[2002,true];}; [[_unit,_val,_itm,player,_apply],"zero_fnc_receiveItem",_unit] call zero_fnc_sendPacket; _type = getText(missionConfigFile >> "zero_CfgItems" >> _itm >> "name"); [format["Du hast %1 %2 %3 gegeben",_unit getVariable["zero_var_realname",name _unit],_val,_type],1] call zero_fnc_msg; [] call zero_fnc_p_updateMenu; ctrlShow[2002,true];
