if (!hasInterface) exitWith {}; private["_unit","_amount"]; if(!zero_var_allowedToGive) exitWith {(localize "STR_NOTF_Give_Money") call zero_fnc_msg;}; if(zero_var_allowedToGive) then { zero_var_allowedToGive = false; [] spawn { uiSleep 5; zero_var_allowedToGive = true; }; }; if(!zero_var_use_atm) exitWith {["Du musst warten bis du dein Geld weitergeben kannst",0,"Du hast kürzlich einen Raub begangen"] call zero_fnc_msg;ctrlShow[2001,true];}; _amount = ctrlText 2018; ctrlShow[2001,false]; if((lbCurSel 2022) isEqualTo -1) exitWith {"Niemand wurde ausgewählt!" call zero_fnc_msg;ctrlShow[2001,true];}; _unit = lbData [2022,lbCurSel 2022]; _unit = call compile format["%1",_unit]; if(isNil "_unit" || {isNull _unit} || {_unit == player}) exitWith {ctrlShow[2001,true];}; if((player distance _unit) > 5) exitWith {ctrlShow[2001,true]; "Der ausgewählte Spieler ist nicht in Reichweite" call zero_fnc_msg;}; if(!([_amount] call zero_fnc_isNumber)) exitWith {"Es sind nur Nummern erlaubt" call zero_fnc_msg;ctrlShow[2001,true];
}; if(parseNumber(_amount) <= 0) exitWith {"Du musst einen Betrag eingeben" call zero_fnc_msg;ctrlShow[2001,true];}; if(parseNumber(_amount) > ([3, 0] call zero_fnc_Z0Check)) exitWith {(localize "STR_NOTF_NotEnoughMoney") call zero_fnc_msg;ctrlShow[2001,true];}; if((parseNumber(_amount)) >= 10000) then { [format ["DIRECT TRANSAKTION: %1 (%2, %3) hat %4 direkt an %5 (%6, %7) gegeben", player getVariable["zero_var_realname",name player], getPlayerUID player, playerSide, _amount, _unit getVariable["zero_var_realname",name _unit], getPlayerUID _unit,side _unit]] call zero_fnc_zoLog; }; [1, ([3, 0] call zero_fnc_Z0Check) - (parseNumber(_amount))] call zero_fnc_Z0Check; [1] call zero_fnc_updatePartial; [_unit,_amount] spawn { uiSleep 3; [format["Du hast %2 €%1 gegeben",[(parseNumber(_this select 1))] call zero_fnc_numberText,(_this select 0) getVariable["zero_var_realname",name (_this select 0)]],1] call zero_fnc_msg; [[_this select 0,_this select 1,player],"zero_fnc_receiveMoney",_this select 0] call zero_fnc_sendPacket; }; [] call zero_fnc_p_updateMenu; ctrlShow[2001,true];
