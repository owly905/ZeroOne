if (!hasInterface) exitWith {}; private["_itm","_val","_sum"]; disableSerialization; if((lbCurSel 2005) isEqualTo -1) exitWith {"Du hast kein Item ausgewählt!" call zero_fnc_msg;}; _itm = lbData[2005,(lbCurSel 2005)]; switch (true) do { case (_itm == "water" || _itm == "coffee"): { if(([false,_itm,1] call zero_fnc_handleZOInv)) then { zero_var_thirst = 100; player enableFatigue false; player enableStamina false; player setFatigue 0; [] spawn { zero_var_stamina = true; uiSleep 10; if(!isNil "zero_var_stamina") then { zero_var_stamina = nil; }; }; }; }; case (_itm == "boltcutter"): { if(!(player getVariable["zero_var_restrained",false])) then { [cursorObject] spawn zero_fnc_boltcutter; closeDialog 0; }else{ (localize "STR_General_Zipties_Error") call zero_fnc_msg; }; }; case (_itm == "blastingcharge"): { if(!(player getVariable["zero_var_restrained",false])) then { player reveal fed_bank; (group player) reveal fed_bank; [cursorObject] spawn zero_fnc_blastingCharge; }else{ (localize "STR_General_Zipties_Error") call zero_fnc_msg; }; }; case (_itm == "defusekit"): {[cursorObject] spawn zero_fnc_defuseKit;}; case (_itm == "medipack"): {[0] spawn zero_fnc_selfhealing;}; case (_itm == "medipack_large"): {[1] spawn zero_fnc_selfhealing;}; case (_itm == "defibrillator"): { if(isNull cursorObject || {alive cursorObject} || {!(cursorObject isKindOf "Man")}) exitWith {"Das kannst du nur an Toten anwenden" call zero_fnc_msg;}; if(playerSide isEqualTo west) then { [cursorObject] spawn zero_fnc_revivePlayer; }else{ if(zero_var_license_civ_firstaid) then { if(playerSide isEqualTo east) then { if(zero_var_license_civ_firstaid_military) then { [cursorObject] spawn zero_fnc_revivePlayer; }else{ (format["Du brauchst eine %1", ["zero_var_license_civ_firstaid_military"] call zero_fnc_varToStr]) call zero_fnc_msg; }; }else{ [cursorObject] spawn zero_fnc_revivePlayer; }; }else{ (format["Du brauchst eine %1", ["zero_var_license_civ_firstaid"] call zero_fnc_varToStr]) call zero_fnc_msg; }; }; }; case (_itm == "adrenalin"): { if(alive player) then {"Das kannst du nur benutzen wenn du tot bist." call zero_fnc_msg; }; }; case (_itm == "redgull"): { if(([false,_itm,1] call zero_fnc_handleZOInv)) then { zero_var_thirst = 100; [] spawn { zero_var_redgull_effect = time; zero_var_redgull_used = true; titleText["Du kannst nun 3 Minuten sprinten","PLAIN"]; player enableFatigue false; player enableStamina false; player setFatigue 0; waitUntil {!alive player || ((time - zero_var_redgull_effect) > (3 * 60))}; titleText["Die RedGull Zeit ist abgelaufen","PLAIN"]; zero_var_redgull_used = nil; zero_var_overeaten = nil; }; }; }; case (_itm == "fuelF"): { if(!isNull (objectParent player)) exitWith {"Steig aus dem Fahrzeug aus!" call zero_fnc_msg;}; if(!(player getVariable["zero_var_restrained",false])) then { [] spawn zero_fnc_jerryRefuel; }else{ (localize "STR_General_Zipties_Error") call zero_fnc_msg; }; }; case (_itm == "lockpick"): { if(!(player getVariable["zero_var_restrained",false])) then { [] spawn zero_fnc_lockpick; }else{ (localize "STR_General_Zipties_Error") call zero_fnc_msg; }; }; case (_itm in ["apple","rabbit","tuna","turtle","turtlesoup","donuts","tbacon","peach","bananen","pizza"]): { if([false,_itm,1] call zero_fnc_handleZOInv) then { _val = getNumber(missionConfigFile >> "zero_CfgItems" >> _itm >> "food"); _sum = zero_var_hunger + _val; if(_sum > 100) then { _sum = 100; zero_var_overeaten = true; player enableFatigue true; player setFatigue 1; [localize "STR_NOTF_EatMSG_Overeaten",-1] call zero_fnc_msg; [] spawn { uiSleep 30; player setFatigue 0; player enableFatigue false; player enableStamina false; zero_var_overeaten = nil; }; }; zero_var_hunger = _sum; }; }; case (_itm == "pickaxe"): { if(!(player getVariable["zero_var_restrained",false])) then { [] spawn zero_fnc_pickaxeUse; }else{ (localize "STR_General_Zipties_Error") call zero_fnc_msg; }; }; case (_itm == "marijuana" || _itm == "med_marijuana"): { if(!(player getVariable["zero_var_restrained",false])) then { if(([false,_itm,1] call zero_fnc_handleZOInv)) then {[] spawn zero_fnc_weed;}; }else{ (localize "STR_General_Zipties_Error") call zero_fnc_msg; }; }; case (_itm == "cocainep"): { if(!(player getVariable["zero_var_restrained",false])) then { if(([false,_itm,1] call zero_fnc_handleZOInv)) then { zero_var_thirst = 20; [] spawn { zero_var_redgull_effect = time; zero_var_redgull_used = true; titleText["Du kannst nun rennen bis die Wirkung nachlässt! Lauf vollgedröhnter Forest... Lauf!","PLAIN"]; [] spawn zero_fnc_coke; player enableFatigue false; player enableStamina false; player setFatigue 0; waitUntil {!alive player || ((time - zero_var_redgull_effect) > (10 * 60))}; zero_var_redgull_used = nil; zero_var_overeaten = nil; }; }; }else{ (localize "STR_General_Zipties_Error") call zero_fnc_msg;
}; }; case (_itm == "whiskey"): { if(!(player getVariable["zero_var_restrained",false])) then { if([false,_itm,1] call zero_fnc_handleZOInv) then { if(isNil "zero_var_drink") then {zero_var_drink = 0;}; zero_var_drink = zero_var_drink + 0.6; if (zero_var_drink < 0.6) exitWith {}; [] spawn zero_fnc_drinkwhiskey; }; }else{ (localize "STR_General_Zipties_Error") call zero_fnc_msg; }; }; case (_itm == "moonshine"): { if(!(player getVariable["zero_var_restrained",false])) then { if([false,_itm,1] call zero_fnc_handleZOInv) then { if(isNil "zero_var_drink") then {zero_var_drink = 0;}; zero_var_drink = zero_var_drink + 0.8; if (zero_var_drink < 0.8) exitWith {}; [] spawn zero_fnc_drinkmoonshine; }; }else{ (localize "STR_General_Zipties_Error") call zero_fnc_msg; }; }; case (_itm == "beer"): { if(!(player getVariable["zero_var_restrained",false])) then { if([false,_itm,1] call zero_fnc_handleZOInv) then { if(isNil "zero_var_drink") then {zero_var_drink = 0;}; zero_var_drink = zero_var_drink + 0.3; if (zero_var_drink < 0.5) exitWith {}; [] spawn zero_fnc_drinkbeer; }; }else{ (localize "STR_General_Zipties_Error") call zero_fnc_msg; }; }; case (_itm == "placebo"): { if([false,_itm,1] call zero_fnc_handleZOInv) then { _val = getNumber(missionConfigFile >> "zero_CfgItems" >> _itm >> "food"); _sum = zero_var_hunger + _val; if(_sum > 100) then { _sum = 100; zero_var_overeaten = true; player enableFatigue true; player setFatigue 1; [localize "STR_NOTF_EatMSG_Overeaten",-1] call zero_fnc_msg; [] spawn { uiSleep 30; player setFatigue 0; player enableFatigue false; player enableStamina false; zero_var_overeaten = nil; }; }; zero_var_hunger = _sum; }; zero_var_thirst = zero_var_thirst + 10; if(zero_var_thirst > 100) then {zero_var_thirst = 100;}; }; case (_itm == "pukepill"): { if([false,_itm,1] call zero_fnc_handleZOInv) then { player playMove "AinvPknlMstpSlayWrflDnon"; zero_var_drink = zero_var_drink - 0.6; if(zero_var_drink < 0) then {zero_var_drink = 0;}; }; }; case (_itm == "alamut"): { [_itm] spawn { params["_itm"]; if([false,_itm,1] call zero_fnc_handleZOInv) then { _exit = false; _pos = getPos player; _backpack = unitBackpack player; if(isNull _backpack) exitWith {"Du benötigst einen Rucksack um diese Rakete zu tragen!" call zero_fnc_msg;if(!([true,_itm,1] call zero_fnc_handleZOInv)) exitWith {};}; if(!(_backpack canAdd "RPG32_HE_F")) exitWith {"Du hast keinen Platz im Rucksack!" call zero_fnc_msg;if(!([true,_itm,1] call zero_fnc_handleZOInv)) exitWith {};}; disableSerialization; 5 cutRsc ["zero_var_progress","PLAIN"]; private _ui = uiNamespace getVariable "zero_var_progress"; private _progress = _ui displayCtrl 38201; private _pgText = _ui displayCtrl 38202; private _cP = 0.01; _pgText ctrlSetText format["Wandle Alamut Rakete um (%1%2)...",round(_cP * 100),"%"]; _progress progressSetPosition 0.01; player playMove "Acts_carFixingWheel"; for "_i" from 0 to 100 step 1 do { uiSleep 1; _cP = _cP + 0.0434; _progress progressSetPosition _cP; _pgText ctrlSetText format["Wandle Alamut Rakete um (%1%2)...",round(_cP * 100),"%"]; if(_cP >= 1) exitWith {}; if(player distance _pos > 2) exitWith {"Du darfst dich nicht bewegen!" call zero_fnc_msg;_exit = true;}; if(zero_var_istazed || zero_var_killed) exitWith {_exit = true;}; }; 5 cutText ["","PLAIN"]; player playActionNow "stop"; if(_exit && !zero_var_killed) exitWith {if(!([true,_itm,1] call zero_fnc_handleZOInv)) exitWith {};}; if(_exit) exitWith {}; player addItemToBackpack "RPG32_HE_F"; }; }; }; case (_itm == "rpg7"): { [_itm] spawn { params["_itm"]; if([false,_itm,1] call zero_fnc_handleZOInv) then { _exit = false; _pos = getPos player; _backpack = unitBackpack player; if(isNull _backpack) exitWith {"Du benötigst einen Rucksack um diese Rakete zu tragen!" call zero_fnc_msg;if(!([true,_itm,1] call zero_fnc_handleZOInv)) exitWith {};}; if(!(_backpack canAdd "RPG7_F")) exitWith {"Du hast keinen Platz im Rucksack!" call zero_fnc_msg;if(!([true,_itm,1] call zero_fnc_handleZOInv)) exitWith {};}; disableSerialization; 5 cutRsc ["zero_var_progress","PLAIN"]; private _ui = uiNamespace getVariable "zero_var_progress"; private _progress = _ui displayCtrl 38201; private _pgText = _ui displayCtrl 38202; private _cP = 0.01; _pgText ctrlSetText format["Wandle RPG7 Rakete um (%1%2)...",round(_cP * 100),"%"]; _progress progressSetPosition 0.01; player playMove "Acts_carFixingWheel"; for "_i" from 0 to 100 step 1 do { uiSleep 1; _cP = _cP + 0.0434; _progress progressSetPosition _cP; _pgText ctrlSetText format["Wandle RPG7 Rakete um (%1%2)...",round(_cP * 100),"%"]; if(_cP >= 1) exitWith {}; if(player distance _pos > 2) exitWith {"Du darfst dich nicht bewegen!" call zero_fnc_msg;_exit = true;}; if(zero_var_istazed || zero_var_killed) exitWith {_exit = true;}; }; 5 cutText ["","PLAIN"]; player playActionNow "stop"; if(_exit && !zero_var_killed) exitWith {if(!([true,_itm,1] call zero_fnc_handleZOInv)) exitWith {};}; if(_exit) exitWith {}; player addItemToBackpack "RPG7_F"; }; }; }; default {"Das Item kannst du nicht benutzen." call zero_fnc_msg; }; }; [] call zero_fnc_p_updateMenu; [] call zero_fnc_hudUpdate;
