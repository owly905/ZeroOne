if (!hasInterface) exitWith {}; private ["_unit","_time","_action","_priority","_uiDisp","_timer","_house"]; disableSerialization; if (!isNil "zero_var_formularChecked") exitWith {}; _action = [ format["MÃ¶chtest du wirklich respawnen?"], format["Respawn"], localize "STR_Global_Yes", localize "STR_Global_No" ] call BIS_fnc_guiMessage; if(!_action) exitWith {}; zero_var_suicide = true; 2 cutText [" ","PLAIN"]; ["",0,0,1,0.1,0,1000] spawn BIS_fnc_dynamicText; hint ""; (findDisplay 46) displayAddEventHandler ["KeyDown", "if((_this select 1) == 1) then {true};"]; if(serverTime < 13500 || {serverTime > 15000 && serverTime < 20700}) then { profileNamespace setVariable["zero_killed",playerSide]; }; player setVariable["zero_var_revive",false,true]; player setVariable["zero_var_name",profileName,true]; player setVariable["zero_var_side",playerSide,true]; player setVariable["zero_var_restrained",false,true]; if(player getVariable ["zero_var_restrained_ziptie", false]) then { player setVariable ["zero_var_restrained_ziptie", nil, true]; }; player setVariable["zero_var_escorting",false,true]; player setVariable["zero_var_transporting",false,true]; player setVariable["zero_var_dead_money",([3, 0] call zero_fnc_Z0Check),true]; [1, 0] call zero_fnc_Z0Check; [] call zero_fnc_updateRequest; zero_var_escort = nil; zero_var_old_skills = zero_var_skills; player setVariable["zero_var_corpse", player, true]; zero_var_aborted = true; [1] call zero_fnc_useBag; zero_var_killed = true; zero_var_killed_lokalbank = true; (findDisplay 46) displaySetEventHandler ["KeyDown","if((_this select 1) == 1) then {true}"]; _priority =400; zero_var_deathCamera = "CAMERA" camCreate (getPosATL player); _unit = player; [[player, "zero_var_fnc_setDamage", [player, 1.914672]], "zero_fnc_remoteExecuteCommand", zero_var_HC1_owner] call zero_fnc_sendPacket; zero_var_deathCamera cameraEffect ["Internal","Back"]; zero_var_deathCamera camSetTarget _unit; zero_var_deathCamera camSetRelPos [0,3.5,4.5];
zero_var_deathCamera camSetFovRange [1, 0.5]; zero_var_deathCamera camSetFocus [50,0]; zero_var_deathCamera camCommit 10; showCinemaBorder true; zero_var_colorCorrection = ppEffectCreate ["ColorCorrections", 200]; zero_var_dynamicBlur = ppEffectCreate ["DynamicBlur", 100]; zero_var_dynamicBlur ppEffectEnable true; zero_var_colorCorrection ppEffectEnable true; zero_var_colorCorrection ppEffectAdjust [1,0.4,0,0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0]; zero_var_colorCorrection ppEffectCommit (random 10); zero_var_dynamicBlur ppEffectAdjust [10]; zero_var_dynamicBlur ppEffectCommit 10; waitUntil {ppEffectCommitted zero_var_dynamicBlur && ppEffectCommitted zero_var_colorCorrection}; 11 cutRsc ["zero_var_new_timer","PLAIN"]; _uiDisp = uiNamespace getVariable "zero_var_new_timer"; _timer = _uiDisp displayCtrl 38401; _time = time + (90); while {time <= _time} do { if(isNull _uiDisp) then { 11 cutRsc ["zero_var_new_timer","PLAIN"]; _uiDisp = uiNamespace getVariable "zero_var_new_timer"; _timer = _uiDisp displayCtrl 38401; }; _timer ctrlSetStructuredText parseText format["<t color='#ff0000' align='center' >Du wirst erst in %1 Minuten Wiedergeboren.</t>",[(_time - time),"MM:SS"] call BIS_fnc_secondsToString]; uiSleep 1; }; _timer ctrlSetStructuredText parseText format["<t color='#8cff9b' align='center'>Du wirst Wiedergeboren.</t>"]; uiSleep 4; 11 cutText["","PLAIN"]; (findDisplay 46) displayRemoveAllEventHandlers "KeyDown"; (findDisplay 46) displayAddEventHandler ["KeyDown", "_this call zero_fnc_keyHandler"]; if(!(playerSide in [west,independent]))then{[] call zero_fnc_updateRequest;}; [] call zero_fnc_hudUpdate; zero_var_respawned = true; zero_var_vehicles = []; if(count zero_var_houses != 0) then { { _house = nearestBuilding (call compile format['%1', _x select 0]); zero_var_vehicles pushBack _house; } forEach zero_var_houses; }; if(!isNil "zero_var_gangHouse") then { _house = nearestBuilding (call compile format["%1", zero_var_gangHouse]); zero_var_vehicles pushBack _house; }; zero_var_aborted = false; [] call zero_fnc_spawnMenu;
