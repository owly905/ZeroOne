if !(hasInterface) exitWith {}; private _return = "call compile getText (_x >> 'condition')" configClasses (missionConfigFile >> "zero_Cfgspawns" >> str (zero_var_playerSide)) apply { private _cfg = _x; private _houses = getArray (_cfg >> "radius"); private _position = markerPos getText (_cfg >> "position"); if !(_houses isEqualTo []) then { _houses params ["_radius", "_houseArray"]; private _avail = nearestObjects [_position, _houseArray, _radius]; if !(_avail isEqualTo []) then { if(count _avail > 1) then { _position = selectRandom ((selectRandom _avail) call zero_fnc_getBuildingPositions); }else{ private _tmp = getPosATL(_avail select 0); _position = [(_tmp select 0) + random(2), (_tmp select 1) + random(2),(_tmp select 2)] ; }; }; }; [ configName _cfg, _position, round random 360, getText (_cfg >> "display"), getText (_cfg >> "icon") ] }; if (zero_var_playerSide in [civilian, east]) then { if !(zero_var_houses isEqualTo []) then { { _x params ["_pos"]; private _house = nearestBuilding (call compile _pos); if !(isNull _house) then { private _houseName = getText (configFile >> "CfgVehicles" >> (typeOf _house) >> "displayName"); private _gangHouse = _house getVariable ["zero_var_gangID", ""]; private _houseIcon = "\a3\ui_f\data\map\MapControl\tourism_ca.paa"; private _houseId = format ["house_%1", _house getVariable ["uid", -1]];
if (!(_gangHouse isEqualTo "") && {!isNil "zero_var_gangHouse"}) then { _houseId = format ["house_%1", _gangHouse]; _houseName = format ["Ganghaus %1", _houseName]; _houseIcon = "\a3\ui_f\data\map\MapControl\lighthouse_ca.paa"; }; _return pushBack [_houseId, selectRandom (_house call zero_fnc_getBuildingPositions), round random 360, _houseName, _houseIcon]; }; true } count zero_var_houses; }; if !(isNil "zero_var_gangHouse") then { private _gangHouse = nearestBuilding (call compile format ["%1", zero_var_gangHouse]); private _houseId = format ["house_%1", _gangHouse getVariable ["zero_var_gangID",""]]; private _index = [_houseId, _return] call zero_fnc_findIndex; if (_index isEqualTo -1) then { private _gangHouseName = format ["Ganghaus %1", getText (configFile >> "CfgVehicles" >> (typeOf _gangHouse) >> "displayName")]; _return pushBack [_houseId, selectRandom (_gangHouse call zero_fnc_getBuildingPositions), round random 360, _gangHouseName, "\a3\ui_f\data\map\MapControl\lighthouse_ca.paa"]; }; zero_var_vehicles pushBackUnique _gangHouse; }; if (!isNull (zero_gang_flag getVariable ["zero_var_gangControlGroup",grpNull]) && {(group player) == (zero_gang_flag getVariable ["zero_var_gangControlGroup",grpNull])} && {!(zero_gang_flag getVariable["zero_var_gangFight",-1] > 0)}) then { _return pushBack ["gang_spawn", markerPos "gang_spawn", round random 360, "Gangeroberung", "\a3\ui_f\data\map\MapControl\bunker_ca.paa"]; }; }; _return
